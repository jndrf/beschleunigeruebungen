(* Content-type: application/vnd.wolfram.mathematica *)

(*** Wolfram Notebook File ***)
(* http://www.wolfram.com/nb *)

(* CreatedBy='Mathematica 11.2' *)

(*CacheID: 234*)
(* Internal cache information:
NotebookFileLineBreakTest
NotebookFileLineBreakTest
NotebookDataPosition[       158,          7]
NotebookDataLength[     31131,        834]
NotebookOptionsPosition[     26905,        758]
NotebookOutlinePosition[     27254,        773]
CellTagsIndexPosition[     27211,        770]
WindowFrame->Normal*)

(* Beginning of Notebook Content *)
Notebook[{

Cell[CellGroupData[{
Cell["Blatt 5 - Optimierung der Emittanz im DBA-Lattice", "Title",
 CellChangeTimes->{{3.733150260850556*^9, 3.733150267458297*^9}, {
  3.7331503011552844`*^9, 3.7331503144025855`*^9}, {3.7341321039040036`*^9, 
  3.734132104034525*^9}, {3.734132785922567*^9, 3.7341327957290573`*^9}, {
  3.7346835053860807`*^9, 
  3.734683510321913*^9}},ExpressionUUID->"93bbad7c-f06f-43d7-9405-\
864be9d6e68b"],

Cell["Jonas Neundorf & Jan Skottke", "Text",
 CellChangeTimes->{{3.733150270690807*^9, 
  3.733150283127518*^9}},ExpressionUUID->"35f4395c-b0da-40de-80a0-\
494156ecd658"],

Cell["Definiere Konstanten", "Text",
 CellChangeTimes->{{3.734133492022656*^9, 
  3.7341335021797333`*^9}},ExpressionUUID->"e0bbb0f9-3343-4c93-95ee-\
1e8cbd3bdece"],

Cell[BoxData[
 RowBox[{
  RowBox[{"constants", "=", 
   RowBox[{"{", 
    RowBox[{
     RowBox[{"c", "\[Rule]", " ", 
      RowBox[{"3.", "*", 
       SuperscriptBox["10", "8"]}]}], ",", " ", 
     RowBox[{"q", "\[Rule]", " ", 
      RowBox[{"1.602", "*", 
       SuperscriptBox["10", 
        RowBox[{"-", "19"}]]}]}], ",", 
     RowBox[{"m", "\[Rule]", " ", 
      RowBox[{"0.511", "*", 
       SuperscriptBox["10", 
        RowBox[{"-", "3"}]]}]}], ",", 
     RowBox[{"r0", "\[Rule]", " ", 
      RowBox[{"2.818", "*", 
       SuperscriptBox["10", 
        RowBox[{"-", "15"}]]}]}], ",", 
     RowBox[{"cq", "\[Rule]", " ", 
      RowBox[{"3.8", "*", 
       SuperscriptBox["10", 
        RowBox[{"-", "13"}]]}]}]}], "}"}]}], ";"}]], "Input",
 CellChangeTimes->{{3.7331503207570624`*^9, 3.7331503509464016`*^9}, 
   3.73315064304441*^9, {3.73315107837197*^9, 3.733151114802534*^9}, 
   3.7334717840711155`*^9, {3.73348073406295*^9, 3.733480736509141*^9}, {
   3.733480819374033*^9, 3.7334808294543314`*^9}, {3.7334809231839457`*^9, 
   3.733480991517853*^9}, {3.734133612385388*^9, 
   3.734133621761384*^9}},ExpressionUUID->"173db715-a89e-4256-b66b-\
1030d455bf48"],

Cell[CellGroupData[{

Cell["Berechnung der Dispersionfunktion", "Section",
 CellChangeTimes->{{3.734790328580213*^9, 
  3.7347903346747885`*^9}},ExpressionUUID->"44dec455-dd13-42df-8a37-\
324b210522ff"],

Cell["Definiere die Matritzen f\[UDoubleDot]r die Magnete:", "Text",
 CellChangeTimes->{{3.7346864823209066`*^9, 
  3.7346865026895423`*^9}},ExpressionUUID->"6d78e088-7db3-4e3b-ad93-\
0b35ac78b486"],

Cell[BoxData[
 RowBox[{
  RowBox[{"mF", "[", "f_", "]"}], ":=", 
  RowBox[{"{", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{"1", ",", "0", ",", "0"}], "}"}], ",", 
    RowBox[{"{", 
     RowBox[{
      RowBox[{
       RowBox[{"-", "1"}], "/", "f"}], ",", "1", ",", "0"}], "}"}], ",", 
    RowBox[{"{", 
     RowBox[{"0", ",", "0", ",", "1"}], "}"}]}], "}"}], " ", 
  RowBox[{"(*", 
   RowBox[{"fokussierender", " ", "Quad"}], "*)"}]}]], "Input",
 CellChangeTimes->{{3.734683954086671*^9, 3.7346839840023055`*^9}, {
   3.7346840518110223`*^9, 3.734684056482964*^9}, {3.7346846466919384`*^9, 
   3.734684657041711*^9}, 3.7346847042106695`*^9, {3.7346858511582794`*^9, 
   3.734685862401821*^9}},ExpressionUUID->"0cb4ccb9-0f7d-400c-84d9-\
6c08b6f01fc3"],

Cell[BoxData[
 RowBox[{
  RowBox[{"mD", "[", 
   RowBox[{"s_", ",", " ", "\[Rho]_"}], "]"}], " ", ":=", " ", 
  RowBox[{"{", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{
      RowBox[{"Cos", "[", 
       FractionBox["s", "\[Rho]"], "]"}], ",", " ", 
      RowBox[{"\[Rho]", "*", 
       RowBox[{"Sin", "[", 
        FractionBox["s", "\[Rho]"], "]"}]}], ",", " ", 
      RowBox[{"\[Rho]", "*", 
       RowBox[{"(", 
        RowBox[{"1", " ", "-", " ", 
         RowBox[{"Cos", "[", 
          FractionBox["s", "\[Rho]"], "]"}]}], ")"}]}]}], "}"}], ",", " ", 
    RowBox[{"{", 
     RowBox[{
      RowBox[{
       RowBox[{
        RowBox[{"-", "1"}], "/", "\[Rho]"}], "*", 
       RowBox[{"Sin", "[", 
        FractionBox["s", "\[Rho]"], "]"}]}], ",", " ", 
      RowBox[{"Cos", "[", 
       FractionBox["s", "\[Rho]"], "]"}], ",", " ", 
      RowBox[{"Sin", "[", 
       FractionBox["s", "\[Rho]"], "]"}]}], "}"}], ",", " ", 
    RowBox[{"{", 
     RowBox[{"0", ",", " ", "0", ",", " ", "1"}], "}"}]}], "}"}], 
  RowBox[{"(*", "Dipol", "*)"}]}]], "Input",
 CellChangeTimes->{{3.7257085387348447`*^9, 3.725708562974574*^9}, {
  3.734685213939081*^9, 3.734685219329794*^9}, {3.7346858657940335`*^9, 
  3.734685871090122*^9}, {3.7347909060837855`*^9, 
  3.7347909623719416`*^9}},ExpressionUUID->"fa5c1aa1-077f-4d4e-a710-\
70f5ab4264cc"],

Cell["Definiere Dispersionsfunktionen:", "Text",
 CellChangeTimes->{{3.7346865061139865`*^9, 
  3.734686524017215*^9}},ExpressionUUID->"83b561ee-3ce7-48ee-bba7-\
cae00f425e6f"],

Cell[BoxData[
 RowBox[{
  RowBox[{"\[Eta]", "[", "s_", "]"}], ":=", 
  RowBox[{"\[Rho]", "*", 
   RowBox[{"(", 
    RowBox[{"1", "-", 
     RowBox[{"Cos", "[", 
      FractionBox["s", "\[Rho]"], "]"}]}], ")"}]}]}]], "Input",
 CellChangeTimes->{{3.7346838450161924`*^9, 
  3.7346838619763327`*^9}},ExpressionUUID->"135e19f8-2e76-4538-90a9-\
9ca0dc14966a"],

Cell[BoxData[
 RowBox[{
  RowBox[{
   RowBox[{"d\[Eta]", "[", "s_", "]"}], "=", 
   RowBox[{"D", "[", 
    RowBox[{
     RowBox[{"\[Eta]", "[", "s", "]"}], ",", "s"}], "]"}]}], ";"}]], "Input",
 CellChangeTimes->{{3.7346838692042646`*^9, 3.7346838844020944`*^9}, {
   3.7346842327867537`*^9, 3.7346842344016056`*^9}, {3.7346843597477274`*^9, 
   3.734684360914852*^9}, 3.734684715715088*^9, 3.7346853899866495`*^9, 
   3.7346858442910137`*^9},ExpressionUUID->"375e516d-0c14-4b1b-8c45-\
ef136321b73c"],

Cell["Bestimmte f:", "Text",
 CellChangeTimes->{{3.7346865307544823`*^9, 
  3.734686536769641*^9}},ExpressionUUID->"83a6313e-6715-4f38-8ecc-\
cf1698180dfe"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"eq", "=", 
  RowBox[{
   RowBox[{
    RowBox[{"{", 
     RowBox[{"0", ",", "0", ",", "1"}], "}"}], "==", 
    RowBox[{
     RowBox[{"mD", "[", 
      RowBox[{"s", ",", "\[Rho]"}], "]"}], ".", 
     RowBox[{"mF", "[", "f", "]"}], ".", 
     RowBox[{"mD", "[", 
      RowBox[{"s", ",", "\[Rho]"}], "]"}], ".", 
     RowBox[{"{", 
      RowBox[{
       RowBox[{"\[Eta]", "[", "0", "]"}], ",", 
       RowBox[{"d\[Eta]", "[", "0", "]"}], ",", "1"}], "}"}]}]}], "//", 
   "FullSimplify", " ", 
   RowBox[{"(*", 
    RowBox[{
    "Dispersion", " ", "nach", " ", "dem", " ", "ersten", " ", "Dipol"}], 
    "*)"}]}]}]], "Input",
 CellChangeTimes->{{3.734684154501897*^9, 3.7346842102417784`*^9}, {
  3.734684243187643*^9, 3.7346842473936977`*^9}, {3.7346843718275805`*^9, 
  3.7346843997313504`*^9}, {3.734684543522272*^9, 3.734684563809834*^9}, {
  3.7346846624988155`*^9, 3.734684684690531*^9}, {3.734685088452454*^9, 
  3.734685105683077*^9}, {3.7346852397624907`*^9, 3.7346853214582205`*^9}, {
  3.7346854053315926`*^9, 3.7346854360495253`*^9}, {3.734685488882203*^9, 
  3.734685498067169*^9}, {3.7346855379068394`*^9, 3.734685549299032*^9}, {
  3.734685833139085*^9, 3.734685834946556*^9}, {3.7346858750741*^9, 
  3.734685917218063*^9}, {3.7346862473474236`*^9, 3.7346862945776834`*^9}, {
  3.734686377842142*^9, 
  3.7346864546099973`*^9}},ExpressionUUID->"ec37c16a-6c65-45f8-bfbe-\
77e7b3c68403"],

Cell[BoxData[
 RowBox[{
  RowBox[{"{", 
   RowBox[{"0", ",", "0", ",", "1"}], "}"}], "\[Equal]", 
  RowBox[{"{", 
   RowBox[{
    FractionBox[
     RowBox[{"\[Rho]", " ", 
      RowBox[{"(", 
       RowBox[{
        RowBox[{"2", " ", "f"}], "-", 
        RowBox[{"2", " ", "f", " ", 
         RowBox[{"Cos", "[", 
          FractionBox[
           RowBox[{"2", " ", "s"}], "\[Rho]"], "]"}]}], "-", 
        RowBox[{"2", " ", "\[Rho]", " ", 
         RowBox[{"Sin", "[", 
          FractionBox["s", "\[Rho]"], "]"}]}], "+", 
        RowBox[{"\[Rho]", " ", 
         RowBox[{"Sin", "[", 
          FractionBox[
           RowBox[{"2", " ", "s"}], "\[Rho]"], "]"}]}]}], ")"}]}], 
     RowBox[{"2", " ", "f"}]], ",", 
    FractionBox[
     RowBox[{
      RowBox[{"Cos", "[", 
       FractionBox["s", "\[Rho]"], "]"}], " ", 
      RowBox[{"(", 
       RowBox[{
        RowBox[{"\[Rho]", " ", 
         RowBox[{"(", 
          RowBox[{
           RowBox[{"-", "1"}], "+", 
           RowBox[{"Cos", "[", 
            FractionBox["s", "\[Rho]"], "]"}]}], ")"}]}], "+", 
        RowBox[{"2", " ", "f", " ", 
         RowBox[{"Sin", "[", 
          FractionBox["s", "\[Rho]"], "]"}]}]}], ")"}]}], "f"], ",", "1"}], 
   "}"}]}]], "Output",
 CellChangeTimes->{
  3.7346842117784557`*^9, 3.734684249169862*^9, {3.734684366760919*^9, 
   3.734684400181078*^9}, {3.7346845531720743`*^9, 3.7346845641725817`*^9}, {
   3.7346846802970257`*^9, 3.734684720961198*^9}, {3.7346850931889105`*^9, 
   3.7346851060562325`*^9}, {3.734685250265317*^9, 3.734685259311045*^9}, {
   3.7346852905938187`*^9, 3.7346853225852275`*^9}, {3.734685410290123*^9, 
   3.734685436490286*^9}, {3.734685491991643*^9, 3.7346854985964766`*^9}, {
   3.734685538774637*^9, 3.7346855495816545`*^9}, 3.734685835255063*^9, {
   3.7346858920522795`*^9, 3.7346859175598035`*^9}, 3.7346860911571856`*^9, {
   3.7346862563145123`*^9, 3.734686299004533*^9}, {3.734686406048256*^9, 
   3.7346864346066265`*^9}, {3.7346864685543137`*^9, 3.7346864766691103`*^9}, 
   3.7346865432557087`*^9, 3.734686634953203*^9, 3.734790969459959*^9, 
   3.7347919560316825`*^9, 3.7347932536601543`*^9, 
   3.734794219181007*^9},ExpressionUUID->"e99910e5-e5c1-4938-8f76-\
06849f476fe0"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"focus", "=", 
  RowBox[{"Solve", "[", 
   RowBox[{"eq", ",", "f"}], "]"}]}]], "Input",
 CellChangeTimes->{{3.7346864137173553`*^9, 3.734686420610449*^9}, {
  3.73468654734599*^9, 
  3.734686555777295*^9}},ExpressionUUID->"c1c2b73e-c8a3-4441-bcfe-\
a11a5a349aaf"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{"{", 
   RowBox[{"f", "\[Rule]", 
    RowBox[{
     FractionBox["1", "2"], " ", "\[Rho]", " ", 
     RowBox[{"Tan", "[", 
      FractionBox["s", 
       RowBox[{"2", " ", "\[Rho]"}]], "]"}]}]}], "}"}], "}"}]], "Output",
 CellChangeTimes->{{3.7346864209681063`*^9, 3.7346864367865324`*^9}, 
   3.734686476788294*^9, {3.7346865433047843`*^9, 3.7346865564513483`*^9}, 
   3.7346866371265445`*^9, 3.734790969757246*^9, 3.734791956081712*^9, 
   3.7347932537157383`*^9, 
   3.7347942192220697`*^9},ExpressionUUID->"ca7a8833-7c8a-4ca4-90cc-\
cffacaa8bdb9"]
}, Open  ]],

Cell["\<\
Diese Brennweite muss der Quadropol haben, damit die Dispersion am Ende \
wieder bei {0,0,1} ist.\
\>", "Text",
 CellChangeTimes->{{3.734791253733697*^9, 
  3.734791320257802*^9}},ExpressionUUID->"dc95be2f-45e3-4364-84ed-\
1f4fbfc1b72e"],

Cell[CellGroupData[{

Cell["Tests", "Subsubsection",
 CellChangeTimes->{{3.7347916652333593`*^9, 
  3.7347916657466745`*^9}},ExpressionUUID->"867f1970-835c-4be7-a4c2-\
26df64fe7817"],

Cell["\<\
Die berechnete Brennweite liefert das gew\[UDoubleDot]nschte Ergebnis, dass \
die Dispersion nach dem 2. Dipol wieder bei {0,0,1} ist.\
\>", "Text",
 CellChangeTimes->{{3.734791703331735*^9, 
  3.7347917478735456`*^9}},ExpressionUUID->"59038713-a92c-4673-b85b-\
0aa287fa1328"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  RowBox[{
   RowBox[{
    RowBox[{"mD", "[", 
     RowBox[{"s", ",", "\[Rho]"}], "]"}], ".", 
    RowBox[{"mF", "[", "f", "]"}], ".", 
    RowBox[{"mD", "[", 
     RowBox[{"s", ",", "\[Rho]"}], "]"}], ".", 
    RowBox[{"{", 
     RowBox[{
      RowBox[{"\[Eta]", "[", "0", "]"}], ",", 
      RowBox[{"d\[Eta]", "[", "0", "]"}], ",", "1"}], "}"}]}], "//.", 
   "focus"}], "//", "FullSimplify"}]], "Input",
 CellChangeTimes->{{3.73479144419423*^9, 3.734791506354701*^9}, {
  3.734791558132197*^9, 3.734791560226376*^9}, {3.7347915993158894`*^9, 
  3.7347916274748044`*^9}, {3.734791684837102*^9, 
  3.734791691937871*^9}},ExpressionUUID->"aca70666-87b5-43ea-8a2c-\
ef4d5df146bd"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{"{", 
   RowBox[{"0", ",", "0", ",", "1"}], "}"}], "}"}]], "Output",
 CellChangeTimes->{{3.7347914516427107`*^9, 3.734791507032037*^9}, 
   3.73479156091173*^9, 3.7347916002801223`*^9, 3.7347916452414007`*^9, {
   3.734791685514925*^9, 3.734791692501182*^9}, 3.7347919560927052`*^9, 
   3.7347932537327642`*^9, 
   3.7347942192355905`*^9},ExpressionUUID->"46291d72-13d9-4c3f-9ab5-\
464ddf7e0697"]
}, Open  ]],

Cell["Dispersion nach dem ersten Dipol:", "Text",
 CellChangeTimes->{{3.734791807507098*^9, 
  3.734791851105897*^9}},ExpressionUUID->"4c583fc5-1048-4fa8-8da1-\
3f913c3f6ba9"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  RowBox[{
   RowBox[{"mD", "[", 
    RowBox[{"s", ",", "\[Rho]"}], "]"}], ".", 
   RowBox[{"{", 
    RowBox[{
     RowBox[{"\[Eta]", "[", "0", "]"}], ",", 
     RowBox[{"d\[Eta]", "[", "0", "]"}], ",", "1"}], "}"}]}], "//", 
  "FullSimplify"}]], "Input",
 CellChangeTimes->{{3.734791570882467*^9, 3.734791572211795*^9}, {
  3.734791776963023*^9, 
  3.734791778738799*^9}},ExpressionUUID->"b0d51b77-eebb-445c-be70-\
eb14dc905b29"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
   RowBox[{"\[Rho]", "-", 
    RowBox[{"\[Rho]", " ", 
     RowBox[{"Cos", "[", 
      FractionBox["s", "\[Rho]"], "]"}]}]}], ",", 
   RowBox[{"Sin", "[", 
    FractionBox["s", "\[Rho]"], "]"}], ",", "1"}], "}"}]], "Output",
 CellChangeTimes->{{3.7347915681716795`*^9, 3.734791572445304*^9}, 
   3.734791779238531*^9, 3.734791956106744*^9, 3.734793253751292*^9, 
   3.7347942192506137`*^9},ExpressionUUID->"5c080918-6cc6-4fa0-ab43-\
8daa989d0b47"]
}, Open  ]],

Cell["\<\
Dispersion nach dem Quadropol und dem zweiten Dipol: (Hier gehen wir nur \
davon aus, dass der Startpunkt im Quadropol liegt und NICHT im 1. Dipol, da \
die Dispersion nach dem Quadropol und 2. Dipol ja {\[Eta],-d\[Eta]} sein \
sollte. Und das ist sie!! :))\
\>", "Text",
 CellChangeTimes->{{3.7347918236982718`*^9, 
  3.734791949698408*^9}},ExpressionUUID->"e46b5d0b-114c-476e-a453-\
0dca80e17a09"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  RowBox[{
   RowBox[{
    RowBox[{"mF", "[", "f", "]"}], ".", 
    RowBox[{"mD", "[", 
     RowBox[{"s", ",", "\[Rho]"}], "]"}], ".", 
    RowBox[{"{", 
     RowBox[{
      RowBox[{"\[Eta]", "[", "0", "]"}], ",", 
      RowBox[{"d\[Eta]", "[", "0", "]"}], ",", "1"}], "}"}]}], "//.", 
   "focus"}], "//", "FullSimplify"}]], "Input",ExpressionUUID->"bb478731-3d42-\
47e2-a9da-020b3877a610"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{"{", 
   RowBox[{
    RowBox[{"\[Rho]", "-", 
     RowBox[{"\[Rho]", " ", 
      RowBox[{"Cos", "[", 
       FractionBox["s", "\[Rho]"], "]"}]}]}], ",", 
    RowBox[{"-", 
     RowBox[{"Sin", "[", 
      FractionBox["s", "\[Rho]"], "]"}]}], ",", "1"}], "}"}], "}"}]], "Output",
 CellChangeTimes->{3.73479179858294*^9, 3.734791956749752*^9, 
  3.7347932537673173`*^9, 
  3.734794219267151*^9},ExpressionUUID->"d541088e-a576-4fed-b92b-\
4662d206de03"]
}, Open  ]],

Cell["\<\
KOMMENTAR: Ab hier wollte ich eigentlich einen piecewise plot machen, damit \
man sieht wie die Dispersion verl\[ADoubleDot]uft (wie auf dem Blatt \
gefordert), aber leider bin ich zu bl\[ODoubleDot]d daf\[UDoubleDot]r T_T\
\>", "Text",
 CellChangeTimes->{{3.734794161857469*^9, 
  3.7347942096174183`*^9}},ExpressionUUID->"41cfb96d-bac9-4d94-9856-\
f42d15f7be78"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  RowBox[{"dispersion", "[", "s_", "]"}], "=", 
  RowBox[{
   RowBox[{
    RowBox[{
     RowBox[{"{", 
      RowBox[{
       RowBox[{"{", 
        RowBox[{
         RowBox[{"{", 
          RowBox[{"1", ",", "0", ",", "0"}], "}"}], ",", 
         RowBox[{"{", 
          RowBox[{"0", ",", "1", ",", "0"}], "}"}], ",", 
         RowBox[{"{", 
          RowBox[{"0", ",", "0", ",", "1"}], "}"}]}], "}"}], ",", 
       RowBox[{
        RowBox[{"mD", "[", 
         RowBox[{"s", ",", "\[Rho]"}], "]"}], ".", 
        RowBox[{"mF", "[", "f", "]"}]}], ",", 
       RowBox[{
        RowBox[{"mD", "[", 
         RowBox[{"L", ",", "\[Rho]"}], "]"}], ".", 
        RowBox[{"mF", "[", "f", "]"}], ".", 
        RowBox[{"mD", "[", 
         RowBox[{"s", ",", "\[Rho]"}], "]"}]}]}], "}"}], ".", 
     RowBox[{"{", 
      RowBox[{
       RowBox[{"\[Eta]", "[", "0", "]"}], ",", 
       RowBox[{"d\[Eta]", "[", "0", "]"}], ",", "1"}], "}"}]}], "//.", 
    "focus"}], "//", "FullSimplify"}]}]], "Input",
 CellChangeTimes->{{3.7347929648213882`*^9, 3.734792973074894*^9}, {
   3.734793024545777*^9, 3.734793095585576*^9}, {3.734793143730266*^9, 
   3.734793158772315*^9}, {3.7347931888501005`*^9, 3.734793217508547*^9}, {
   3.734793289395669*^9, 3.734793289665902*^9}, 3.734793689601785*^9, {
   3.734793899123406*^9, 3.7347938992977867`*^9}, {3.734793988146789*^9, 
   3.7347939916659136`*^9}, {3.734794040562847*^9, 
   3.7347940859539804`*^9}},ExpressionUUID->"31aa313c-7a43-4ffa-8028-\
cad451c0bf6d"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{"{", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{"0", ",", "0", ",", "1"}], "}"}], ",", 
    RowBox[{"{", 
     RowBox[{
      RowBox[{"\[Rho]", "-", 
       RowBox[{"\[Rho]", " ", 
        RowBox[{"Cos", "[", 
         FractionBox["s", "\[Rho]"], "]"}]}]}], ",", 
      RowBox[{"Sin", "[", 
       FractionBox["s", "\[Rho]"], "]"}], ",", "1"}], "}"}], ",", 
    RowBox[{"{", 
     RowBox[{
      RowBox[{"\[Rho]", "-", 
       RowBox[{"\[Rho]", " ", 
        RowBox[{"Cos", "[", 
         FractionBox[
          RowBox[{"L", "-", "s"}], "\[Rho]"], "]"}]}]}], ",", 
      RowBox[{"Sin", "[", 
       FractionBox[
        RowBox[{"L", "-", "s"}], "\[Rho]"], "]"}], ",", "1"}], "}"}]}], "}"}],
   "}"}]], "Output",
 CellChangeTimes->{
  3.7347931591075068`*^9, {3.734793190827715*^9, 3.7347932178647614`*^9}, 
   3.734793253835451*^9, 3.7347932904719944`*^9, 3.734793690867751*^9, 
   3.73479390011647*^9, 3.734793994593156*^9, 3.7347940468957167`*^9, 
   3.7347940864617677`*^9, 
   3.734794219350767*^9},ExpressionUUID->"77941767-6a1d-440f-a0bc-\
a2ba0ff4796f"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  RowBox[{"dispersion", "[", "s", "]"}], "[", 
  RowBox[{"[", 
   RowBox[{"1", ",", "1", ",", "1"}], "]"}], "]"}]], "Input",
 CellChangeTimes->{{3.734793292947699*^9, 3.734793343906479*^9}, {
  3.7347936976520834`*^9, 3.73479369781098*^9}, {3.7347941249803677`*^9, 
  3.734794125106318*^9}},ExpressionUUID->"ae93c749-fba1-4111-9e04-\
f0d39b961d8a"],

Cell[BoxData["0"], "Output",
 CellChangeTimes->{{3.734793297174631*^9, 3.7347933444717965`*^9}, 
   3.73479369814869*^9, {3.734794121737754*^9, 3.7347941253874445`*^9}, 
   3.7347942193652897`*^9},ExpressionUUID->"7a3f3201-6741-48cc-8c52-\
ba8e754d83ab"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  RowBox[{"fulldispersion", "[", "s_", "]"}], "=", 
  RowBox[{"\[Piecewise]", GridBox[{
     {
      RowBox[{
       RowBox[{
        RowBox[{"dispersion", "[", "s", "]"}], "[", 
        RowBox[{"[", 
         RowBox[{"1", ",", "1", ",", "1"}], "]"}], "]"}], 
       "\[IndentingNewLine]", 
       RowBox[{
        RowBox[{"dispersion", "[", "s", "]"}], "[", 
        RowBox[{"[", 
         RowBox[{"1", ",", "2", ",", "1"}], "]"}], "]"}]}], 
      RowBox[{
       RowBox[{"s", "=", "0"}], "\[IndentingNewLine]", 
       RowBox[{"s", "<=", "L"}]}]},
     {
      RowBox[{
       RowBox[{"dispersion", "[", 
        RowBox[{"s", "-", "L"}], "]"}], "[", 
       RowBox[{"[", 
        RowBox[{"1", ",", "3", ",", "1"}], "]"}], "]"}], 
      RowBox[{"L", "<", "s", "\[LessEqual]", 
       RowBox[{"2", "*", "L"}]}]}
    }]}]}]], "Input",
 CellChangeTimes->{{3.725708794257989*^9, 3.7257089911849365`*^9}, 
   3.7257091377138677`*^9, 3.7257102004686766`*^9, 3.7257104019392385`*^9, {
   3.7257105093315787`*^9, 3.7257106087063923`*^9}, {3.7258643978706255`*^9, 
   3.7258644142769923`*^9}, {3.7258645605888057`*^9, 
   3.7258645952309685`*^9}, {3.7258646351148696`*^9, 
   3.7258646368512735`*^9}, {3.725864772157258*^9, 3.725864858920347*^9}, {
   3.72586491350354*^9, 3.725864921933281*^9}, {3.7258650753666887`*^9, 
   3.7258651109474354`*^9}, {3.734793175379659*^9, 3.7347932004016457`*^9}, {
   3.7347932311864605`*^9, 3.7347932409010572`*^9}, {3.7347933951229973`*^9, 
   3.734793406563079*^9}, {3.734793457698424*^9, 3.734793582707088*^9}, {
   3.7347937076993484`*^9, 3.734793721922683*^9}, {3.7347937594576597`*^9, 
   3.7347937676662903`*^9}, {3.734793872274322*^9, 3.734793873729724*^9}, {
   3.7347939096355796`*^9, 3.73479394997089*^9}, {3.734794103154763*^9, 
   3.734794115057398*^9}},ExpressionUUID->"01d492b6-fa48-4edb-88ce-\
f5501c58eaa5"],

Cell[BoxData[
 TagBox[GridBox[{
    {"\[Piecewise]", GridBox[{
       {"0", "0"},
       {
        RowBox[{"\[Rho]", "-", 
         RowBox[{"\[Rho]", " ", 
          RowBox[{"Cos", "[", 
           FractionBox[
            RowBox[{"2", " ", "L"}], "\[Rho]"], "]"}]}]}], 
        RowBox[{"L", "<", "0", "\[LessEqual]", 
         RowBox[{"2", " ", "L"}]}]},
       {"0", 
        TagBox["True",
         "PiecewiseDefault",
         AutoDelete->True]}
      },
      AllowedDimensions->{2, Automatic},
      Editable->True,
      GridBoxAlignment->{
       "Columns" -> {{Left}}, "ColumnsIndexed" -> {}, "Rows" -> {{Baseline}}, 
        "RowsIndexed" -> {}},
      GridBoxItemSize->{
       "Columns" -> {{Automatic}}, "ColumnsIndexed" -> {}, "Rows" -> {{1.}}, 
        "RowsIndexed" -> {}},
      GridBoxSpacings->{"Columns" -> {
          Offset[0.27999999999999997`], {
           Offset[0.84]}, 
          Offset[0.27999999999999997`]}, "ColumnsIndexed" -> {}, "Rows" -> {
          Offset[0.2], {
           Offset[0.4]}, 
          Offset[0.2]}, "RowsIndexed" -> {}},
      Selectable->True]}
   },
   GridBoxAlignment->{
    "Columns" -> {{Left}}, "ColumnsIndexed" -> {}, "Rows" -> {{Baseline}}, 
     "RowsIndexed" -> {}},
   GridBoxItemSize->{
    "Columns" -> {{Automatic}}, "ColumnsIndexed" -> {}, "Rows" -> {{1.}}, 
     "RowsIndexed" -> {}},
   GridBoxSpacings->{"Columns" -> {
       Offset[0.27999999999999997`], {
        Offset[0.35]}, 
       Offset[0.27999999999999997`]}, "ColumnsIndexed" -> {}, "Rows" -> {
       Offset[0.2], {
        Offset[0.4]}, 
       Offset[0.2]}, "RowsIndexed" -> {}}],
  "Piecewise",
  DeleteWithContents->True,
  Editable->False,
  SelectWithContents->True,
  Selectable->False]], "Output",
 CellChangeTimes->{
  3.734793406827661*^9, {3.7347935262216644`*^9, 3.7347935830348825`*^9}, {
   3.7347937627791357`*^9, 3.7347937688635054`*^9}, 3.734793874287058*^9, 
   3.734793951322208*^9, 3.7347939975240045`*^9, {3.734794090600913*^9, 
   3.7347941153868237`*^9}, 
   3.7347942193853207`*^9},ExpressionUUID->"934633bb-d7ce-41ed-89b7-\
5e978ad32452"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"Plot", "[", 
  RowBox[{
   RowBox[{
    RowBox[{
     RowBox[{"fulldispersion", "[", "x", "]"}], "//.", "focus"}], "//.", 
    RowBox[{"{", 
     RowBox[{
      RowBox[{"L", " ", "\[Rule]", "5"}], ",", " ", 
      RowBox[{"\[Rho]", "->", " ", "10000"}]}], "}"}]}], ",", " ", 
   RowBox[{"{", 
    RowBox[{"x", ",", " ", "0", ",", " ", "19"}], "}"}], ",", " ", 
   RowBox[{"AxesLabel", "\[Rule]", " ", 
    RowBox[{"{", 
     RowBox[{"\"\<s\>\"", ",", " ", "\"\<D[s]\>\""}], "}"}]}]}], 
  "]"}]], "Input",
 CellChangeTimes->{{3.734793795202365*^9, 
  3.734793812275632*^9}},ExpressionUUID->"f722159b-45fc-4347-98c9-\
3ea13cb76207"],

Cell[BoxData[
 GraphicsBox[{{{}, {}, 
    TagBox[
     {RGBColor[0.368417, 0.506779, 0.709798], AbsoluteThickness[1.6], Opacity[
      1.], LineBox[CompressedData["
1:eJxNznlI03EYBvApiCuVuVpkDptLt7TDzSKn1VKbRbNmMhyWOVnlsQpbzGmO
cuKVC0FHOs0tO6zRLDFTUaQ/Kg1ny/LA1Kx+KnjMrAzRHZpaQb7fvfDy8IEX
npd6TsJPcsThcLy/+y+PWTm2MifNIdz/KWVQBK3Y1dA1u7AXuAVYIdjAEUVc
wirANIM6PAF7DO5XMl/FYi3g2ums7BjMAPbQ+I7wsUE7l/TwRkxgCeNHwqJ8
DhyP0z6yJlnBATrSO1nfCng2d5hcKXYMW3NIlaotSO8E7vxp7KkZwoMj7nrk
svtcwI2sLh93VwL4ZgW3KceZCB4OkKxPztkA9n1hGLpAJoGTzTXW5cpN4Af0
l6rnwZvBCmn5l+5uDzA/1SJXHPcEewuLSk5MkcETS3rzkxQv8MMS20c/PAWc
S7nRpIz2BtdF9dOPEKjgWOsBARFDvi4X19LubQNL8RlCSbwPeJxYZez09wX3
zSlFF6eR2VHFDeRWGljeIktwLKCDmVbK3kDOdnBi43i7hOgHJh29nGXuRVZP
Dqkaiv3BpQ5CkeLMDrDrvO7ULc+dYMezeLfmaeQ0HeMb9ekucLOFRW0X7wan
vzlNkgUFgOvFYcxUM3JKYRg+o4MBtnxy94rjMsG2z+cjq/TIIdp2gYkQCGZ1
FKTHXkHemhl8eOwDMmfK8l26bw+Y3ral1k+NrBScXNdfjjxjyk/Ovo1cT/jl
PaBF3i/sUOdVI/Os0mzsGbIsoItfZkQeeO1QH9qFHCJguc28R165Vm0I77X7
523mwdlBZG0ijR45YXdvictbmEQWFalG75uQfRuWNJYZ5LrVXoJuDtm91Dk1
eh45jc42Li0gB/P0+Xwbsmb069jyIvJy2sbQmt92/c7cOzEryG0ahW11FfkP
VJ4bVA==
       "]]},
     Annotation[#, "Charting`Private`Tag$2302#1"]& ]}, {}, {}},
  AspectRatio->NCache[GoldenRatio^(-1), 0.6180339887498948],
  Axes->{True, True},
  AxesLabel->{
    FormBox["\"s\"", TraditionalForm], 
    FormBox["\"D[s]\"", TraditionalForm]},
  AxesOrigin->{0, 0},
  DisplayFunction->Identity,
  Frame->{{False, False}, {False, False}},
  FrameLabel->{{None, None}, {None, None}},
  FrameTicks->{{Automatic, 
     Charting`ScaledFrameTicks[{Identity, Identity}]}, {Automatic, 
     Charting`ScaledFrameTicks[{Identity, Identity}]}},
  GridLines->{None, None},
  GridLinesStyle->Directive[
    GrayLevel[0.5, 0.4]],
  ImagePadding->All,
  Method->{
   "DefaultBoundaryStyle" -> Automatic, "DefaultMeshStyle" -> 
    AbsolutePointSize[6], "ScalingFunctions" -> None, 
    "CoordinatesToolOptions" -> {"DisplayFunction" -> ({
        (Identity[#]& )[
         Part[#, 1]], 
        (Identity[#]& )[
         Part[#, 2]]}& ), "CopiedValueFunction" -> ({
        (Identity[#]& )[
         Part[#, 1]], 
        (Identity[#]& )[
         Part[#, 2]]}& )}},
  PlotRange->{{0, 19}, {-1., 1.}},
  PlotRangeClipping->True,
  PlotRangePadding->{{
     Scaled[0.02], 
     Scaled[0.02]}, {
     Scaled[0.05], 
     Scaled[0.05]}},
  Ticks->{Automatic, Automatic}]], "Output",
 CellChangeTimes->{{3.7347938061506095`*^9, 3.7347938127818556`*^9}, 
   3.734793875419348*^9, 3.734793958077845*^9, 3.7347939989828253`*^9, {
   3.7347940921428084`*^9, 3.734794116493204*^9}, 
   3.734794219522031*^9},ExpressionUUID->"10deb560-bd8e-4e1f-8dde-\
4da6f44c5f41"]
}, Open  ]]
}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell["Berechnung der Twiss Parameter (\[Beta]-Funktionen)", "Section",
 CellChangeTimes->{{3.734790340691185*^9, 
  3.7347903558426323`*^9}},ExpressionUUID->"45c4c865-3081-4b31-ae62-\
a5517d7c9d30"],

Cell[BoxData[
 RowBox[{"bmat", ":=", 
  RowBox[{"{", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{"\[Beta]", ",", 
      RowBox[{"-", "\[Alpha]"}]}], "}"}], ",", 
    RowBox[{"{", 
     RowBox[{
      RowBox[{"-", "\[Alpha]"}], ",", "\[Gamma]"}], "}"}]}], "}"}]}]], "Input",
 CellChangeTimes->{{3.734790384538519*^9, 
  3.734790413411646*^9}},ExpressionUUID->"f77b83c7-613f-4e68-9c81-\
ac1dfdb59ae1"]
}, Open  ]]
}, Open  ]]
},
WindowSize->{1920, 1037},
WindowMargins->{{-8, Automatic}, {Automatic, -8}},
FrontEndVersion->"11.2 for Microsoft Windows (64-bit) (September 10, 2017)",
StyleDefinitions->"Default.nb"
]
(* End of Notebook Content *)

(* Internal cache information *)
(*CellTagsOutline
CellTagsIndex->{}
*)
(*CellTagsIndex
CellTagsIndex->{}
*)
(*NotebookFileOutline
Notebook[{
Cell[CellGroupData[{
Cell[580, 22, 395, 6, 96, "Title",ExpressionUUID->"93bbad7c-f06f-43d7-9405-864be9d6e68b"],
Cell[978, 30, 170, 3, 34, "Text",ExpressionUUID->"35f4395c-b0da-40de-80a0-494156ecd658"],
Cell[1151, 35, 164, 3, 34, "Text",ExpressionUUID->"e0bbb0f9-3343-4c93-95ee-1e8cbd3bdece"],
Cell[1318, 40, 1169, 30, 32, "Input",ExpressionUUID->"173db715-a89e-4256-b66b-1030d455bf48"],
Cell[CellGroupData[{
Cell[2512, 74, 180, 3, 67, "Section",ExpressionUUID->"44dec455-dd13-42df-8a37-324b210522ff"],
Cell[2695, 79, 198, 3, 34, "Text",ExpressionUUID->"6d78e088-7db3-4e3b-ad93-0b35ac78b486"],
Cell[2896, 84, 750, 19, 28, "Input",ExpressionUUID->"0cb4ccb9-0f7d-400c-84d9-6c08b6f01fc3"],
Cell[3649, 105, 1332, 36, 52, "Input",ExpressionUUID->"fa5c1aa1-077f-4d4e-a710-70f5ab4264cc"],
Cell[4984, 143, 176, 3, 34, "Text",ExpressionUUID->"83b561ee-3ce7-48ee-bba7-cae00f425e6f"],
Cell[5163, 148, 354, 10, 52, "Input",ExpressionUUID->"135e19f8-2e76-4538-90a9-9ca0dc14966a"],
Cell[5520, 160, 500, 11, 28, "Input",ExpressionUUID->"375e516d-0c14-4b1b-8c45-ef136321b73c"],
Cell[6023, 173, 156, 3, 34, "Text",ExpressionUUID->"83a6313e-6715-4f38-8ecc-cf1698180dfe"],
Cell[CellGroupData[{
Cell[6204, 180, 1419, 32, 28, "Input",ExpressionUUID->"ec37c16a-6c65-45f8-bfbe-77e7b3c68403"],
Cell[7626, 214, 2215, 53, 70, "Output",ExpressionUUID->"e99910e5-e5c1-4938-8f76-06849f476fe0"]
}, Open  ]],
Cell[CellGroupData[{
Cell[9878, 272, 286, 7, 28, "Input",ExpressionUUID->"c1c2b73e-c8a3-4441-bcfe-a11a5a349aaf"],
Cell[10167, 281, 589, 14, 57, "Output",ExpressionUUID->"ca7a8833-7c8a-4ca4-90cc-cffacaa8bdb9"]
}, Open  ]],
Cell[10771, 298, 247, 6, 34, "Text",ExpressionUUID->"dc95be2f-45e3-4364-84ed-1f4fbfc1b72e"],
Cell[CellGroupData[{
Cell[11043, 308, 160, 3, 44, "Subsubsection",ExpressionUUID->"867f1970-835c-4be7-a4c2-26df64fe7817"],
Cell[11206, 313, 286, 6, 34, "Text",ExpressionUUID->"59038713-a92c-4673-b85b-0aa287fa1328"],
Cell[CellGroupData[{
Cell[11517, 323, 702, 18, 28, "Input",ExpressionUUID->"aca70666-87b5-43ea-8a2c-ef4d5df146bd"],
Cell[12222, 343, 435, 9, 32, "Output",ExpressionUUID->"46291d72-13d9-4c3f-9ab5-464ddf7e0697"]
}, Open  ]],
Cell[12672, 355, 175, 3, 34, "Text",ExpressionUUID->"4c583fc5-1048-4fa8-8da1-3f913c3f6ba9"],
Cell[CellGroupData[{
Cell[12872, 362, 454, 13, 28, "Input",ExpressionUUID->"b0d51b77-eebb-445c-be70-eb14dc905b29"],
Cell[13329, 377, 487, 12, 55, "Output",ExpressionUUID->"5c080918-6cc6-4fa0-ab43-8daa989d0b47"]
}, Open  ]],
Cell[13831, 392, 409, 8, 34, "Text",ExpressionUUID->"e46b5d0b-114c-476e-a453-0dca80e17a09"],
Cell[CellGroupData[{
Cell[14265, 404, 414, 12, 28, "Input",ExpressionUUID->"bb478731-3d42-47e2-a9da-020b3877a610"],
Cell[14682, 418, 488, 14, 55, "Output",ExpressionUUID->"d541088e-a576-4fed-b92b-4662d206de03"]
}, Open  ]],
Cell[15185, 435, 374, 7, 34, "Text",ExpressionUUID->"41cfb96d-bac9-4d94-9856-f42d15f7be78"],
Cell[CellGroupData[{
Cell[15584, 446, 1512, 38, 28, "Input",ExpressionUUID->"31aa313c-7a43-4ffa-8028-cad451c0bf6d"],
Cell[17099, 486, 1100, 31, 57, "Output",ExpressionUUID->"77941767-6a1d-440f-a0bc-a2ba0ff4796f"]
}, Open  ]],
Cell[CellGroupData[{
Cell[18236, 522, 372, 8, 28, "Input",ExpressionUUID->"ae93c749-fba1-4111-9e04-f0d39b961d8a"],
Cell[18611, 532, 254, 4, 32, "Output",ExpressionUUID->"7a3f3201-6741-48cc-8c52-ba8e754d83ab"]
}, Open  ]],
Cell[CellGroupData[{
Cell[18902, 541, 1876, 41, 66, "Input",ExpressionUUID->"01d492b6-fa48-4edb-88ce-f5501c58eaa5"],
Cell[20781, 584, 2095, 58, 79, "Output",ExpressionUUID->"934633bb-d7ce-41ed-89b7-5e978ad32452"]
}, Open  ]],
Cell[CellGroupData[{
Cell[22913, 647, 654, 18, 28, "Input",ExpressionUUID->"f722159b-45fc-4347-98c9-3ea13cb76207"],
Cell[23570, 667, 2646, 63, 241, "Output",ExpressionUUID->"10deb560-bd8e-4e1f-8dde-4da6f44c5f41"]
}, Open  ]]
}, Open  ]]
}, Open  ]],
Cell[CellGroupData[{
Cell[26277, 737, 198, 3, 67, "Section",ExpressionUUID->"45c4c865-3081-4b31-ae62-a5517d7c9d30"],
Cell[26478, 742, 399, 12, 61, "Input",ExpressionUUID->"f77b83c7-613f-4e68-9c81-ac1dfdb59ae1"]
}, Open  ]]
}, Open  ]]
}
]
*)

