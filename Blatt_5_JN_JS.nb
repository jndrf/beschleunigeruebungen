(* Content-type: application/vnd.wolfram.mathematica *)

(*** Wolfram Notebook File ***)
(* http://www.wolfram.com/nb *)

(* CreatedBy='Mathematica 11.2' *)

(*CacheID: 234*)
(* Internal cache information:
NotebookFileLineBreakTest
NotebookFileLineBreakTest
NotebookDataPosition[       158,          7]
NotebookDataLength[     58708,       1527]
NotebookOptionsPosition[     53032,       1427]
NotebookOutlinePosition[     53381,       1442]
CellTagsIndexPosition[     53338,       1439]
WindowFrame->Normal*)

(* Beginning of Notebook Content *)
Notebook[{

Cell[CellGroupData[{
Cell["Blatt 5 - Optimierung der Emittanz im DBA-Lattice", "Title",
 CellChangeTimes->{{3.733150260850556*^9, 3.733150267458297*^9}, {
  3.7331503011552844`*^9, 3.7331503144025855`*^9}, {3.7341321039040036`*^9, 
  3.734132104034525*^9}, {3.734132785922567*^9, 3.7341327957290573`*^9}, {
  3.7346835053860807`*^9, 
  3.734683510321913*^9}},ExpressionUUID->"93bbad7c-f06f-43d7-9405-\
864be9d6e68b"],

Cell["Jonas Neundorf & Jan Skottke", "Text",
 CellChangeTimes->{{3.733150270690807*^9, 
  3.733150283127518*^9}},ExpressionUUID->"35f4395c-b0da-40de-80a0-\
494156ecd658"],

Cell["Definiere Konstanten", "Text",
 CellChangeTimes->{{3.734133492022656*^9, 
  3.7341335021797333`*^9}},ExpressionUUID->"e0bbb0f9-3343-4c93-95ee-\
1e8cbd3bdece"],

Cell[BoxData[
 RowBox[{
  RowBox[{"constants", "=", 
   RowBox[{"{", 
    RowBox[{
     RowBox[{"c", "\[Rule]", " ", 
      RowBox[{"3.", "*", 
       SuperscriptBox["10", "8"]}]}], ",", " ", 
     RowBox[{"q", "\[Rule]", " ", 
      RowBox[{"1.602", "*", 
       SuperscriptBox["10", 
        RowBox[{"-", "19"}]]}]}], ",", 
     RowBox[{"m", "\[Rule]", " ", 
      RowBox[{"0.511", "*", 
       SuperscriptBox["10", 
        RowBox[{"-", "3"}]]}]}], ",", 
     RowBox[{"r0", "\[Rule]", " ", 
      RowBox[{"2.818", "*", 
       SuperscriptBox["10", 
        RowBox[{"-", "15"}]]}]}], ",", 
     RowBox[{"cq", "\[Rule]", " ", 
      RowBox[{"3.8", "*", 
       SuperscriptBox["10", 
        RowBox[{"-", "13"}]]}]}]}], "}"}]}], ";"}]], "Input",
 CellChangeTimes->{{3.7331503207570624`*^9, 3.7331503509464016`*^9}, 
   3.73315064304441*^9, {3.73315107837197*^9, 3.733151114802534*^9}, 
   3.7334717840711155`*^9, {3.73348073406295*^9, 3.733480736509141*^9}, {
   3.733480819374033*^9, 3.7334808294543314`*^9}, {3.7334809231839457`*^9, 
   3.733480991517853*^9}, {3.734133612385388*^9, 
   3.734133621761384*^9}},ExpressionUUID->"173db715-a89e-4256-b66b-\
1030d455bf48"],

Cell[CellGroupData[{

Cell["Berechnung der Dispersionfunktion", "Section",
 CellChangeTimes->{{3.734790328580213*^9, 
  3.7347903346747885`*^9}},ExpressionUUID->"44dec455-dd13-42df-8a37-\
324b210522ff"],

Cell["Definiere die Matritzen f\[UDoubleDot]r die Magnete:", "Text",
 CellChangeTimes->{{3.7346864823209066`*^9, 
  3.7346865026895423`*^9}},ExpressionUUID->"6d78e088-7db3-4e3b-ad93-\
0b35ac78b486"],

Cell[BoxData[
 RowBox[{
  RowBox[{"mF", "[", "f_", "]"}], ":=", 
  RowBox[{"{", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{"1", ",", "0", ",", "0"}], "}"}], ",", 
    RowBox[{"{", 
     RowBox[{
      RowBox[{
       RowBox[{"-", "1"}], "/", "f"}], ",", "1", ",", "0"}], "}"}], ",", 
    RowBox[{"{", 
     RowBox[{"0", ",", "0", ",", "1"}], "}"}]}], "}"}], " ", 
  RowBox[{"(*", 
   RowBox[{"fokussierender", " ", "Quad"}], "*)"}]}]], "Input",
 CellChangeTimes->{{3.734683954086671*^9, 3.7346839840023055`*^9}, {
   3.7346840518110223`*^9, 3.734684056482964*^9}, {3.7346846466919384`*^9, 
   3.734684657041711*^9}, 3.7346847042106695`*^9, {3.7346858511582794`*^9, 
   3.734685862401821*^9}},ExpressionUUID->"0cb4ccb9-0f7d-400c-84d9-\
6c08b6f01fc3"],

Cell[BoxData[
 RowBox[{
  RowBox[{"mD", "[", 
   RowBox[{"s_", ",", " ", "\[Rho]_"}], "]"}], " ", ":=", " ", 
  RowBox[{"{", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{
      RowBox[{"Cos", "[", 
       FractionBox["s", "\[Rho]"], "]"}], ",", " ", 
      RowBox[{"\[Rho]", "*", 
       RowBox[{"Sin", "[", 
        FractionBox["s", "\[Rho]"], "]"}]}], ",", " ", 
      RowBox[{"\[Rho]", "*", 
       RowBox[{"(", 
        RowBox[{"1", " ", "-", " ", 
         RowBox[{"Cos", "[", 
          FractionBox["s", "\[Rho]"], "]"}]}], ")"}]}]}], "}"}], ",", " ", 
    RowBox[{"{", 
     RowBox[{
      RowBox[{
       RowBox[{
        RowBox[{"-", "1"}], "/", "\[Rho]"}], "*", 
       RowBox[{"Sin", "[", 
        FractionBox["s", "\[Rho]"], "]"}]}], ",", " ", 
      RowBox[{"Cos", "[", 
       FractionBox["s", "\[Rho]"], "]"}], ",", " ", 
      RowBox[{"Sin", "[", 
       FractionBox["s", "\[Rho]"], "]"}]}], "}"}], ",", " ", 
    RowBox[{"{", 
     RowBox[{"0", ",", " ", "0", ",", " ", "1"}], "}"}]}], "}"}], 
  RowBox[{"(*", "Dipol", "*)"}]}]], "Input",
 CellChangeTimes->{{3.7257085387348447`*^9, 3.725708562974574*^9}, {
  3.734685213939081*^9, 3.734685219329794*^9}, {3.7346858657940335`*^9, 
  3.734685871090122*^9}, {3.7347909060837855`*^9, 
  3.7347909623719416`*^9}},ExpressionUUID->"fa5c1aa1-077f-4d4e-a710-\
70f5ab4264cc"],

Cell["Definiere Dispersionsfunktionen:", "Text",
 CellChangeTimes->{{3.7346865061139865`*^9, 
  3.734686524017215*^9}},ExpressionUUID->"83b561ee-3ce7-48ee-bba7-\
cae00f425e6f"],

Cell[BoxData[
 RowBox[{
  RowBox[{"\[Eta]", "[", "s_", "]"}], ":=", 
  RowBox[{"\[Rho]", "*", 
   RowBox[{"(", 
    RowBox[{"1", "-", 
     RowBox[{"Cos", "[", 
      FractionBox["s", "\[Rho]"], "]"}]}], ")"}]}]}]], "Input",
 CellChangeTimes->{{3.7346838450161924`*^9, 
  3.7346838619763327`*^9}},ExpressionUUID->"135e19f8-2e76-4538-90a9-\
9ca0dc14966a"],

Cell[BoxData[
 RowBox[{
  RowBox[{
   RowBox[{"d\[Eta]", "[", "s_", "]"}], "=", 
   RowBox[{"D", "[", 
    RowBox[{
     RowBox[{"\[Eta]", "[", "s", "]"}], ",", "s"}], "]"}]}], ";"}]], "Input",
 CellChangeTimes->{{3.7346838692042646`*^9, 3.7346838844020944`*^9}, {
   3.7346842327867537`*^9, 3.7346842344016056`*^9}, {3.7346843597477274`*^9, 
   3.734684360914852*^9}, 3.734684715715088*^9, 3.7346853899866495`*^9, 
   3.7346858442910137`*^9},ExpressionUUID->"375e516d-0c14-4b1b-8c45-\
ef136321b73c"],

Cell["Bestimme f:", "Text",
 CellChangeTimes->{{3.7346865307544823`*^9, 3.734686536769641*^9}, 
   3.734795251809676*^9, 
   3.7347953644170785`*^9},ExpressionUUID->"83a6313e-6715-4f38-8ecc-\
cf1698180dfe"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"eq", "=", 
  RowBox[{
   RowBox[{
    RowBox[{"{", 
     RowBox[{"0", ",", "0", ",", "1"}], "}"}], "==", 
    RowBox[{
     RowBox[{"mD", "[", 
      RowBox[{"s", ",", "\[Rho]"}], "]"}], ".", 
     RowBox[{"mF", "[", "f", "]"}], ".", 
     RowBox[{"mD", "[", 
      RowBox[{"s", ",", "\[Rho]"}], "]"}], ".", 
     RowBox[{"{", 
      RowBox[{
       RowBox[{"\[Eta]", "[", "0", "]"}], ",", 
       RowBox[{"d\[Eta]", "[", "0", "]"}], ",", "1"}], "}"}]}]}], "//", 
   "FullSimplify", " ", 
   RowBox[{"(*", 
    RowBox[{
    "Dispersion", " ", "nach", " ", "dem", " ", "ersten", " ", "Dipol"}], 
    "*)"}]}]}]], "Input",
 CellChangeTimes->{{3.734684154501897*^9, 3.7346842102417784`*^9}, {
  3.734684243187643*^9, 3.7346842473936977`*^9}, {3.7346843718275805`*^9, 
  3.7346843997313504`*^9}, {3.734684543522272*^9, 3.734684563809834*^9}, {
  3.7346846624988155`*^9, 3.734684684690531*^9}, {3.734685088452454*^9, 
  3.734685105683077*^9}, {3.7346852397624907`*^9, 3.7346853214582205`*^9}, {
  3.7346854053315926`*^9, 3.7346854360495253`*^9}, {3.734685488882203*^9, 
  3.734685498067169*^9}, {3.7346855379068394`*^9, 3.734685549299032*^9}, {
  3.734685833139085*^9, 3.734685834946556*^9}, {3.7346858750741*^9, 
  3.734685917218063*^9}, {3.7346862473474236`*^9, 3.7346862945776834`*^9}, {
  3.734686377842142*^9, 
  3.7346864546099973`*^9}},ExpressionUUID->"ec37c16a-6c65-45f8-bfbe-\
77e7b3c68403"],

Cell[BoxData[
 RowBox[{
  RowBox[{"{", 
   RowBox[{"0", ",", "0", ",", "1"}], "}"}], "\[Equal]", 
  RowBox[{"{", 
   RowBox[{
    FractionBox[
     RowBox[{"\[Rho]", " ", 
      RowBox[{"(", 
       RowBox[{
        RowBox[{"2", " ", "f"}], "-", 
        RowBox[{"2", " ", "f", " ", 
         RowBox[{"Cos", "[", 
          FractionBox[
           RowBox[{"2", " ", "s"}], "\[Rho]"], "]"}]}], "-", 
        RowBox[{"2", " ", "\[Rho]", " ", 
         RowBox[{"Sin", "[", 
          FractionBox["s", "\[Rho]"], "]"}]}], "+", 
        RowBox[{"\[Rho]", " ", 
         RowBox[{"Sin", "[", 
          FractionBox[
           RowBox[{"2", " ", "s"}], "\[Rho]"], "]"}]}]}], ")"}]}], 
     RowBox[{"2", " ", "f"}]], ",", 
    FractionBox[
     RowBox[{
      RowBox[{"Cos", "[", 
       FractionBox["s", "\[Rho]"], "]"}], " ", 
      RowBox[{"(", 
       RowBox[{
        RowBox[{"\[Rho]", " ", 
         RowBox[{"(", 
          RowBox[{
           RowBox[{"-", "1"}], "+", 
           RowBox[{"Cos", "[", 
            FractionBox["s", "\[Rho]"], "]"}]}], ")"}]}], "+", 
        RowBox[{"2", " ", "f", " ", 
         RowBox[{"Sin", "[", 
          FractionBox["s", "\[Rho]"], "]"}]}]}], ")"}]}], "f"], ",", "1"}], 
   "}"}]}]], "Output",
 CellChangeTimes->{
  3.7346842117784557`*^9, 3.734684249169862*^9, {3.734684366760919*^9, 
   3.734684400181078*^9}, {3.7346845531720743`*^9, 3.7346845641725817`*^9}, {
   3.7346846802970257`*^9, 3.734684720961198*^9}, {3.7346850931889105`*^9, 
   3.7346851060562325`*^9}, {3.734685250265317*^9, 3.734685259311045*^9}, {
   3.7346852905938187`*^9, 3.7346853225852275`*^9}, {3.734685410290123*^9, 
   3.734685436490286*^9}, {3.734685491991643*^9, 3.7346854985964766`*^9}, {
   3.734685538774637*^9, 3.7346855495816545`*^9}, 3.734685835255063*^9, {
   3.7346858920522795`*^9, 3.7346859175598035`*^9}, 3.7346860911571856`*^9, {
   3.7346862563145123`*^9, 3.734686299004533*^9}, {3.734686406048256*^9, 
   3.7346864346066265`*^9}, {3.7346864685543137`*^9, 3.7346864766691103`*^9}, 
   3.7346865432557087`*^9, 3.734686634953203*^9, 3.734790969459959*^9, 
   3.7347919560316825`*^9, 3.7347932536601543`*^9, 3.734794219181007*^9, 
   3.734795369630577*^9, 3.7347954083393555`*^9, 3.7347954983443737`*^9, 
   3.73479556557222*^9, 3.7347956434507446`*^9, 3.734797325623132*^9, 
   3.7347975365178638`*^9, 
   3.734797608571319*^9},ExpressionUUID->"426818c4-906f-4e94-9646-\
81cb4c368b5b"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"focus", "=", 
  RowBox[{"Solve", "[", 
   RowBox[{"eq", ",", "f"}], "]"}]}]], "Input",
 CellChangeTimes->{{3.7346864137173553`*^9, 3.734686420610449*^9}, {
  3.73468654734599*^9, 
  3.734686555777295*^9}},ExpressionUUID->"c1c2b73e-c8a3-4441-bcfe-\
a11a5a349aaf"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{"{", 
   RowBox[{"f", "\[Rule]", 
    RowBox[{
     FractionBox["1", "2"], " ", "\[Rho]", " ", 
     RowBox[{"Tan", "[", 
      FractionBox["s", 
       RowBox[{"2", " ", "\[Rho]"}]], "]"}]}]}], "}"}], "}"}]], "Output",
 CellChangeTimes->{{3.7346864209681063`*^9, 3.7346864367865324`*^9}, 
   3.734686476788294*^9, {3.7346865433047843`*^9, 3.7346865564513483`*^9}, 
   3.7346866371265445`*^9, 3.734790969757246*^9, 3.734791956081712*^9, 
   3.7347932537157383`*^9, 3.7347942192220697`*^9, 3.734795369680153*^9, 
   3.734795408430496*^9, 3.734795500527729*^9, 3.7347955656107793`*^9, 
   3.7347956434908056`*^9, 3.7347973256767035`*^9, 3.7347975387528296`*^9, 
   3.7347976086154976`*^9},ExpressionUUID->"3fdccc9e-1fcf-4100-a2c8-\
4b04b1bdcce9"]
}, Open  ]],

Cell["\<\
Diese Brennweite muss der Quadropol haben, damit die Dispersion am Ende \
wieder bei {0,0,1} ist.\
\>", "Text",
 CellChangeTimes->{{3.734791253733697*^9, 
  3.734791320257802*^9}},ExpressionUUID->"dc95be2f-45e3-4364-84ed-\
1f4fbfc1b72e"],

Cell[CellGroupData[{

Cell["Tests", "Subsubsection",
 CellChangeTimes->{{3.7347916652333593`*^9, 
  3.7347916657466745`*^9}},ExpressionUUID->"867f1970-835c-4be7-a4c2-\
26df64fe7817"],

Cell["\<\
Die berechnete Brennweite liefert das gew\[UDoubleDot]nschte Ergebnis, dass \
die Dispersion nach dem 2. Dipol wieder bei {0,0,1} ist.\
\>", "Text",
 CellChangeTimes->{{3.734791703331735*^9, 
  3.7347917478735456`*^9}},ExpressionUUID->"59038713-a92c-4673-b85b-\
0aa287fa1328"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  RowBox[{
   RowBox[{
    RowBox[{"mD", "[", 
     RowBox[{"s", ",", "\[Rho]"}], "]"}], ".", 
    RowBox[{"mF", "[", "f", "]"}], ".", 
    RowBox[{"mD", "[", 
     RowBox[{"s", ",", "\[Rho]"}], "]"}], ".", 
    RowBox[{"{", 
     RowBox[{
      RowBox[{"\[Eta]", "[", "0", "]"}], ",", 
      RowBox[{"d\[Eta]", "[", "0", "]"}], ",", "1"}], "}"}]}], "//.", 
   "focus"}], "//", "FullSimplify"}]], "Input",
 CellChangeTimes->{{3.73479144419423*^9, 3.734791506354701*^9}, {
  3.734791558132197*^9, 3.734791560226376*^9}, {3.7347915993158894`*^9, 
  3.7347916274748044`*^9}, {3.734791684837102*^9, 3.734791691937871*^9}, {
  3.7347952768339224`*^9, 
  3.73479530856208*^9}},ExpressionUUID->"aca70666-87b5-43ea-8a2c-\
ef4d5df146bd"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{"{", 
   RowBox[{"0", ",", "0", ",", "1"}], "}"}], "}"}]], "Output",
 CellChangeTimes->{{3.7347914516427107`*^9, 3.734791507032037*^9}, 
   3.73479156091173*^9, 3.7347916002801223`*^9, 3.7347916452414007`*^9, {
   3.734791685514925*^9, 3.734791692501182*^9}, 3.7347919560927052`*^9, 
   3.7347932537327642`*^9, 3.7347942192355905`*^9, 3.734795369693684*^9, 
   3.7347954084530306`*^9, 3.734795500602844*^9, 3.7347955656237993`*^9, 
   3.7347956435038257`*^9, 3.734797326306171*^9, 3.7347975388214345`*^9, 
   3.7347976092435513`*^9},ExpressionUUID->"aeb8d157-06d9-4d5b-8a0b-\
34d20b9f08a8"]
}, Open  ]],

Cell["Dispersion nach dem ersten Dipol:", "Text",
 CellChangeTimes->{{3.734791807507098*^9, 
  3.734791851105897*^9}},ExpressionUUID->"4c583fc5-1048-4fa8-8da1-\
3f913c3f6ba9"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"dispd1", "=", 
  RowBox[{
   RowBox[{
    RowBox[{"mD", "[", 
     RowBox[{"s", ",", "\[Rho]"}], "]"}], ".", 
    RowBox[{"{", 
     RowBox[{
      RowBox[{"\[Eta]", "[", "0", "]"}], ",", 
      RowBox[{"d\[Eta]", "[", "0", "]"}], ",", "1"}], "}"}]}], "//", 
   "FullSimplify"}]}]], "Input",
 CellChangeTimes->{{3.734791570882467*^9, 3.734791572211795*^9}, {
  3.734791776963023*^9, 3.734791778738799*^9}, {3.7347953168816605`*^9, 
  3.7347953216653066`*^9}, {3.734795378753622*^9, 
  3.734795475585639*^9}},ExpressionUUID->"b0d51b77-eebb-445c-be70-\
eb14dc905b29"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
   RowBox[{"\[Rho]", "-", 
    RowBox[{"\[Rho]", " ", 
     RowBox[{"Cos", "[", 
      FractionBox["s", "\[Rho]"], "]"}]}]}], ",", 
   RowBox[{"Sin", "[", 
    FractionBox["s", "\[Rho]"], "]"}], ",", "1"}], "}"}]], "Output",
 CellChangeTimes->{{3.7347915681716795`*^9, 3.734791572445304*^9}, 
   3.734791779238531*^9, 3.734791956106744*^9, 3.734793253751292*^9, 
   3.7347942192506137`*^9, {3.7347953697071943`*^9, 3.734795408467052*^9}, {
   3.734795446119542*^9, 3.7347955006158648`*^9}, 3.734795565638321*^9, 
   3.7347956435213523`*^9, 3.7347973264078274`*^9, 3.7347975388344545`*^9, 
   3.7347976093647256`*^9},ExpressionUUID->"c4769d4e-db80-4b5c-97c3-\
f35c4b7ab1b9"]
}, Open  ]],

Cell["\<\
Dispersion nach dem Quadropol und dem zweiten Dipol: (Hier gehen wir nur \
davon aus, dass der Startpunkt im Quadropol liegt und NICHT im 1. Dipol, da \
die Dispersion nach dem Quadropol und 2. Dipol ja {\[Eta],-d\[Eta]} sein \
sollte. Und das ist sie!! :))\
\>", "Text",
 CellChangeTimes->{{3.7347918236982718`*^9, 
  3.734791949698408*^9}},ExpressionUUID->"e46b5d0b-114c-476e-a453-\
0dca80e17a09"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"dispqd2", "=", 
  RowBox[{
   RowBox[{
    RowBox[{
     RowBox[{"mF", "[", "f", "]"}], ".", 
     RowBox[{"mD", "[", 
      RowBox[{"s", ",", "\[Rho]"}], "]"}], ".", 
     RowBox[{"{", 
      RowBox[{
       RowBox[{"\[Eta]", "[", "0", "]"}], ",", 
       RowBox[{"d\[Eta]", "[", "0", "]"}], ",", "1"}], "}"}]}], "//.", 
    "focus"}], "//", "FullSimplify"}]}]], "Input",
 CellChangeTimes->{{3.734795480354295*^9, 
  3.7347954853288016`*^9}},ExpressionUUID->"bb478731-3d42-47e2-a9da-\
020b3877a610"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{"{", 
   RowBox[{
    RowBox[{"\[Rho]", "-", 
     RowBox[{"\[Rho]", " ", 
      RowBox[{"Cos", "[", 
       FractionBox["s", "\[Rho]"], "]"}]}]}], ",", 
    RowBox[{"-", 
     RowBox[{"Sin", "[", 
      FractionBox["s", "\[Rho]"], "]"}]}], ",", "1"}], "}"}], "}"}]], "Output",
 CellChangeTimes->{
  3.73479179858294*^9, 3.734791956749752*^9, 3.7347932537673173`*^9, 
   3.734794219267151*^9, 3.7347953697192125`*^9, 3.7347954085076146`*^9, {
   3.7347954856145763`*^9, 3.734795500630888*^9}, 3.7347955656503396`*^9, 
   3.734795643533371*^9, 3.7347973264248657`*^9, 3.7347975388529835`*^9, 
   3.7347976093782463`*^9},ExpressionUUID->"fa99b8b1-de4d-4b83-a6d3-\
553020387607"]
}, Open  ]],

Cell["\<\
KOMMENTAR: Ab hier wollte ich eigentlich einen piecewise plot machen, damit \
man sieht wie die Dispersion verl\[ADoubleDot]uft (wie auf dem Blatt \
gefordert), aber leider bin ich zu bl\[ODoubleDot]d daf\[UDoubleDot]r T_T\
\>", "Text",
 CellChangeTimes->{{3.734794161857469*^9, 
  3.7347942096174183`*^9}},ExpressionUUID->"41cfb96d-bac9-4d94-9856-\
f42d15f7be78"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  RowBox[{"dispersion", "[", "s_", "]"}], "=", 
  RowBox[{
   RowBox[{
    RowBox[{
     RowBox[{"{", 
      RowBox[{
       RowBox[{"{", 
        RowBox[{
         RowBox[{"{", 
          RowBox[{"1", ",", "0", ",", "0"}], "}"}], ",", 
         RowBox[{"{", 
          RowBox[{"0", ",", "1", ",", "0"}], "}"}], ",", 
         RowBox[{"{", 
          RowBox[{"0", ",", "0", ",", "1"}], "}"}]}], "}"}], ",", 
       RowBox[{
        RowBox[{"mD", "[", 
         RowBox[{"s", ",", "\[Rho]"}], "]"}], ".", 
        RowBox[{"mF", "[", "f", "]"}]}], ",", 
       RowBox[{
        RowBox[{"mD", "[", 
         RowBox[{"L", ",", "\[Rho]"}], "]"}], ".", 
        RowBox[{"mF", "[", "f", "]"}], ".", 
        RowBox[{"mD", "[", 
         RowBox[{"s", ",", "\[Rho]"}], "]"}]}]}], "}"}], ".", 
     RowBox[{"{", 
      RowBox[{
       RowBox[{"\[Eta]", "[", "0", "]"}], ",", 
       RowBox[{"d\[Eta]", "[", "0", "]"}], ",", "1"}], "}"}]}], "//.", 
    "focus"}], "//", "FullSimplify"}]}]], "Input",
 CellChangeTimes->{{3.7347929648213882`*^9, 3.734792973074894*^9}, {
   3.734793024545777*^9, 3.734793095585576*^9}, {3.734793143730266*^9, 
   3.734793158772315*^9}, {3.7347931888501005`*^9, 3.734793217508547*^9}, {
   3.734793289395669*^9, 3.734793289665902*^9}, 3.734793689601785*^9, {
   3.734793899123406*^9, 3.7347938992977867`*^9}, {3.734793988146789*^9, 
   3.7347939916659136`*^9}, {3.734794040562847*^9, 
   3.7347940859539804`*^9}},ExpressionUUID->"31aa313c-7a43-4ffa-8028-\
cad451c0bf6d"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{"{", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{"0", ",", "0", ",", "1"}], "}"}], ",", 
    RowBox[{"{", 
     RowBox[{
      RowBox[{"\[Rho]", "-", 
       RowBox[{"\[Rho]", " ", 
        RowBox[{"Cos", "[", 
         FractionBox["s", "\[Rho]"], "]"}]}]}], ",", 
      RowBox[{"Sin", "[", 
       FractionBox["s", "\[Rho]"], "]"}], ",", "1"}], "}"}], ",", 
    RowBox[{"{", 
     RowBox[{
      RowBox[{"\[Rho]", "-", 
       RowBox[{"\[Rho]", " ", 
        RowBox[{"Cos", "[", 
         FractionBox[
          RowBox[{"L", "-", "s"}], "\[Rho]"], "]"}]}]}], ",", 
      RowBox[{"Sin", "[", 
       FractionBox[
        RowBox[{"L", "-", "s"}], "\[Rho]"], "]"}], ",", "1"}], "}"}]}], "}"}],
   "}"}]], "Output",
 CellChangeTimes->{
  3.7347931591075068`*^9, {3.734793190827715*^9, 3.7347932178647614`*^9}, 
   3.734793253835451*^9, 3.7347932904719944`*^9, 3.734793690867751*^9, 
   3.73479390011647*^9, 3.734793994593156*^9, 3.7347940468957167`*^9, 
   3.7347940864617677`*^9, 3.734794219350767*^9, 3.734795370404335*^9, 
   3.7347954085626993`*^9, 3.734795500689478*^9, 3.734795566297778*^9, 
   3.7347956435894575`*^9, 3.734797326484471*^9, 3.734797538918584*^9, 
   3.734797609442858*^9},ExpressionUUID->"17d2544b-9254-4f3b-9dc2-\
42c9e525c0b7"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  RowBox[{"fulldispersion", "[", "s_", "]"}], "=", 
  RowBox[{"\[Piecewise]", GridBox[{
     {
      RowBox[{
       RowBox[{"dispersion", "[", "s", "]"}], "[", 
       RowBox[{"[", 
        RowBox[{"1", ",", "2", ",", "1"}], "]"}], "]"}], 
      RowBox[{"s", "<=", "L"}]},
     {
      RowBox[{
       RowBox[{"dispersion", "[", 
        RowBox[{"s", "-", "L"}], "]"}], "[", 
       RowBox[{"[", 
        RowBox[{"1", ",", "3", ",", "1"}], "]"}], "]"}], 
      RowBox[{"L", "<", "s", "\[LessEqual]", 
       RowBox[{"2", "*", "L"}]}]}
    }]}]}]], "Input",
 CellChangeTimes->{{3.725708794257989*^9, 3.7257089911849365`*^9}, 
   3.7257091377138677`*^9, 3.7257102004686766`*^9, 3.7257104019392385`*^9, {
   3.7257105093315787`*^9, 3.7257106087063923`*^9}, {3.7258643978706255`*^9, 
   3.7258644142769923`*^9}, {3.7258645605888057`*^9, 
   3.7258645952309685`*^9}, {3.7258646351148696`*^9, 
   3.7258646368512735`*^9}, {3.725864772157258*^9, 3.725864858920347*^9}, {
   3.72586491350354*^9, 3.725864921933281*^9}, {3.7258650753666887`*^9, 
   3.7258651109474354`*^9}, {3.734793175379659*^9, 3.7347932004016457`*^9}, {
   3.7347932311864605`*^9, 3.7347932409010572`*^9}, {3.7347933951229973`*^9, 
   3.734793406563079*^9}, {3.734793457698424*^9, 3.734793582707088*^9}, {
   3.7347937076993484`*^9, 3.734793721922683*^9}, {3.7347937594576597`*^9, 
   3.7347937676662903`*^9}, {3.734793872274322*^9, 3.734793873729724*^9}, {
   3.7347939096355796`*^9, 3.73479394997089*^9}, {3.734794103154763*^9, 
   3.734794115057398*^9}, 3.7347955602254624`*^9, {3.734795603922512*^9, 
   3.7347956161460466`*^9}},ExpressionUUID->"01d492b6-fa48-4edb-88ce-\
f5501c58eaa5"],

Cell[BoxData[
 TagBox[GridBox[{
    {"\[Piecewise]", GridBox[{
       {
        RowBox[{"\[Rho]", "-", 
         RowBox[{"\[Rho]", " ", 
          RowBox[{"Cos", "[", 
           FractionBox["s", "\[Rho]"], "]"}]}]}], 
        RowBox[{"s", "\[LessEqual]", "L"}]},
       {
        RowBox[{"\[Rho]", "-", 
         RowBox[{"\[Rho]", " ", 
          RowBox[{"Cos", "[", 
           FractionBox[
            RowBox[{
             RowBox[{"2", " ", "L"}], "-", "s"}], "\[Rho]"], "]"}]}]}], 
        RowBox[{"L", "<", "s", "\[LessEqual]", 
         RowBox[{"2", " ", "L"}]}]},
       {"0", 
        TagBox["True",
         "PiecewiseDefault",
         AutoDelete->True]}
      },
      AllowedDimensions->{2, Automatic},
      Editable->True,
      GridBoxAlignment->{
       "Columns" -> {{Left}}, "ColumnsIndexed" -> {}, "Rows" -> {{Baseline}}, 
        "RowsIndexed" -> {}},
      GridBoxItemSize->{
       "Columns" -> {{Automatic}}, "ColumnsIndexed" -> {}, "Rows" -> {{1.}}, 
        "RowsIndexed" -> {}},
      GridBoxSpacings->{"Columns" -> {
          Offset[0.27999999999999997`], {
           Offset[0.84]}, 
          Offset[0.27999999999999997`]}, "ColumnsIndexed" -> {}, "Rows" -> {
          Offset[0.2], {
           Offset[0.4]}, 
          Offset[0.2]}, "RowsIndexed" -> {}},
      Selectable->True]}
   },
   GridBoxAlignment->{
    "Columns" -> {{Left}}, "ColumnsIndexed" -> {}, "Rows" -> {{Baseline}}, 
     "RowsIndexed" -> {}},
   GridBoxItemSize->{
    "Columns" -> {{Automatic}}, "ColumnsIndexed" -> {}, "Rows" -> {{1.}}, 
     "RowsIndexed" -> {}},
   GridBoxSpacings->{"Columns" -> {
       Offset[0.27999999999999997`], {
        Offset[0.35]}, 
       Offset[0.27999999999999997`]}, "ColumnsIndexed" -> {}, "Rows" -> {
       Offset[0.2], {
        Offset[0.4]}, 
       Offset[0.2]}, "RowsIndexed" -> {}}],
  "Piecewise",
  DeleteWithContents->True,
  Editable->False,
  SelectWithContents->True,
  Selectable->False]], "Output",
 CellChangeTimes->{
  3.734793406827661*^9, {3.7347935262216644`*^9, 3.7347935830348825`*^9}, {
   3.7347937627791357`*^9, 3.7347937688635054`*^9}, 3.734793874287058*^9, 
   3.734793951322208*^9, 3.7347939975240045`*^9, {3.734794090600913*^9, 
   3.7347941153868237`*^9}, 3.7347942193853207`*^9, 3.73479537052432*^9, 
   3.7347954085882382`*^9, 3.734795500713515*^9, 3.7347955664005303`*^9, {
   3.734795617862176*^9, 3.7347956436044807`*^9}, 3.7347973264994926`*^9, 
   3.7347975389411182`*^9, 
   3.7347976094563665`*^9},ExpressionUUID->"35786c0c-2409-4387-8131-\
430a7b34ed57"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"Plot", "[", 
  RowBox[{
   RowBox[{
    RowBox[{
     RowBox[{"fulldispersion", "[", "x", "]"}], "//.", "focus"}], "//.", 
    RowBox[{"{", 
     RowBox[{
      RowBox[{"L", " ", "\[Rule]", "5"}], ",", " ", 
      RowBox[{"\[Rho]", "->", " ", "10000"}]}], "}"}]}], ",", " ", 
   RowBox[{"{", 
    RowBox[{"x", ",", " ", "0", ",", " ", "10"}], "}"}], ",", " ", 
   RowBox[{"AxesLabel", "\[Rule]", " ", 
    RowBox[{"{", 
     RowBox[{"\"\<s\>\"", ",", " ", "\"\<\[Eta][s]\>\""}], "}"}]}]}], 
  "]"}]], "Input",
 CellChangeTimes->{{3.734793795202365*^9, 3.734793812275632*^9}, {
  3.7347957292348595`*^9, 3.7347957414892282`*^9}, {3.7347959977143793`*^9, 
  3.7347959988500433`*^9}},ExpressionUUID->"f722159b-45fc-4347-98c9-\
3ea13cb76207"],

Cell[BoxData[
 GraphicsBox[{{{}, {}, 
    TagBox[
     {RGBColor[0.368417, 0.506779, 0.709798], AbsoluteThickness[1.6], Opacity[
      1.], LineBox[CompressedData["
1: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

       "]]},
     Annotation[#, "Charting`Private`Tag$2910#1"]& ]}, {}, {}},
  AspectRatio->NCache[GoldenRatio^(-1), 0.6180339887498948],
  Axes->{True, True},
  AxesLabel->{
    FormBox["\"s\"", TraditionalForm], 
    FormBox["\"\[Eta][s]\"", TraditionalForm]},
  AxesOrigin->{0, 0},
  DisplayFunction->Identity,
  Frame->{{False, False}, {False, False}},
  FrameLabel->{{None, None}, {None, None}},
  FrameTicks->{{Automatic, 
     Charting`ScaledFrameTicks[{Identity, Identity}]}, {Automatic, 
     Charting`ScaledFrameTicks[{Identity, Identity}]}},
  GridLines->{None, None},
  GridLinesStyle->Directive[
    GrayLevel[0.5, 0.4]],
  ImagePadding->All,
  Method->{
   "DefaultBoundaryStyle" -> Automatic, "DefaultMeshStyle" -> 
    AbsolutePointSize[6], "ScalingFunctions" -> None, 
    "CoordinatesToolOptions" -> {"DisplayFunction" -> ({
        (Identity[#]& )[
         Part[#, 1]], 
        (Identity[#]& )[
         Part[#, 2]]}& ), "CopiedValueFunction" -> ({
        (Identity[#]& )[
         Part[#, 1]], 
        (Identity[#]& )[
         Part[#, 2]]}& )}},
  PlotRange->{{0, 10}, {0., 0.0012496151794039179`}},
  PlotRangeClipping->True,
  PlotRangePadding->{{
     Scaled[0.02], 
     Scaled[0.02]}, {
     Scaled[0.05], 
     Scaled[0.05]}},
  Ticks->{Automatic, Automatic}]], "Output",
 CellChangeTimes->{{3.7347938061506095`*^9, 3.7347938127818556`*^9}, 
   3.734793875419348*^9, 3.734793958077845*^9, 3.7347939989828253`*^9, {
   3.7347940921428084`*^9, 3.734794116493204*^9}, 3.734794219522031*^9, 
   3.7347953706860533`*^9, 3.7347954087194395`*^9, 3.734795500855733*^9, 
   3.7347955691252813`*^9, {3.73479561947713*^9, 3.7347956437421923`*^9}, {
   3.734795731219187*^9, 3.7347957420244083`*^9}, 3.734795999618867*^9, 
   3.7347973266702695`*^9, 3.7347975390988607`*^9, 
   3.734797609613623*^9},ExpressionUUID->"de15ad4d-b43e-41f0-83e3-\
f6f7bb56926a"]
}, Open  ]]
}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell["Berechnung der Twiss Parameter (\[Beta]-Funktionen)", "Section",
 CellChangeTimes->{{3.734790340691185*^9, 
  3.7347903558426323`*^9}},ExpressionUUID->"45c4c865-3081-4b31-ae62-\
a5517d7c9d30"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"bmat", "=", 
  RowBox[{"{", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{"\[Beta]0", ",", 
      RowBox[{"-", "\[Alpha]0"}]}], "}"}], ",", 
    RowBox[{"{", 
     RowBox[{
      RowBox[{"-", "\[Alpha]0"}], ",", "\[Gamma]0"}], "}"}]}], 
   "}"}]}]], "Input",
 CellChangeTimes->{{3.734790384538519*^9, 3.734790413411646*^9}, {
  3.734796069186596*^9, 3.7347960962887664`*^9}, {3.734796218321085*^9, 
  3.7347962187217197`*^9}},ExpressionUUID->"f77b83c7-613f-4e68-9c81-\
ac1dfdb59ae1"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
   RowBox[{"{", 
    RowBox[{"\[Beta]0", ",", 
     RowBox[{"-", "\[Alpha]0"}]}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{
     RowBox[{"-", "\[Alpha]0"}], ",", "\[Gamma]0"}], "}"}]}], "}"}]], "Output",
 CellChangeTimes->{{3.7347960694895515`*^9, 3.7347960968824143`*^9}, 
   3.7347962194398174`*^9, 3.734797326691311*^9, 3.734797539113884*^9, 
   3.7347976096276417`*^9},ExpressionUUID->"2792a8a8-82e2-4f0c-9db1-\
809abc953980"]
}, Open  ]],

Cell[BoxData[
 RowBox[{
  RowBox[{"drift", "[", "s_", "]"}], ":=", 
  RowBox[{"{", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{"1", ",", "s"}], "}"}], ",", 
    RowBox[{"{", 
     RowBox[{"0", ",", "1"}], "}"}]}], "}"}]}]], "Input",
 CellChangeTimes->{{3.7347964574442205`*^9, 
  3.7347964844329205`*^9}},ExpressionUUID->"ca1d149b-0cbf-44d6-ae80-\
4d6d83e7382f"],

Cell[BoxData[
 RowBox[{
  RowBox[{"quad", "[", "f_", "]"}], ":=", 
  RowBox[{"{", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{"1", ",", "0"}], "}"}], ",", 
    RowBox[{"{", 
     RowBox[{
      FractionBox[
       RowBox[{"-", "1"}], "f"], ",", "1"}], "}"}]}], "}"}]}]], "Input",
 CellChangeTimes->{{3.734796489042309*^9, 
  3.7347965256491313`*^9}},ExpressionUUID->"544b9f8b-d288-4e8b-bd54-\
e3e4f31e8ecc"],

Cell["Zuerst berechnen wir die Parameter f\[UDoubleDot]r den ersten Dipol:", \
"Text",
 CellChangeTimes->{{3.7347964347527423`*^9, 
  3.734796443616587*^9}},ExpressionUUID->"e51a103c-b3c6-4fdd-a732-\
2ff3f0e30873"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  RowBox[{"twissd1", "[", "s_", "]"}], "=", 
  RowBox[{
   RowBox[{
    RowBox[{"drift", "[", "s", "]"}], ".", "bmat", ".", 
    RowBox[{"Transpose", "[", 
     RowBox[{"drift", "[", "s", "]"}], "]"}]}], "//", 
   "FullSimplify"}]}]], "Input",
 CellChangeTimes->{{3.7347965339877806`*^9, 3.734796552307187*^9}, {
  3.734796714833457*^9, 3.7347967216013784`*^9}, {3.734797300755427*^9, 
  3.7347973017615366`*^9}, {3.734797527729185*^9, 
  3.7347975288349485`*^9}},ExpressionUUID->"7c2cf80e-c9ba-4009-b938-\
cdf215a36ef8"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
   RowBox[{"{", 
    RowBox[{
     RowBox[{
      RowBox[{
       RowBox[{"-", "2"}], " ", "s", " ", "\[Alpha]0"}], "+", "\[Beta]0", "+", 
      RowBox[{
       SuperscriptBox["s", "2"], " ", "\[Gamma]0"}]}], ",", 
     RowBox[{
      RowBox[{"-", "\[Alpha]0"}], "+", 
      RowBox[{"s", " ", "\[Gamma]0"}]}]}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{
     RowBox[{
      RowBox[{"-", "\[Alpha]0"}], "+", 
      RowBox[{"s", " ", "\[Gamma]0"}]}], ",", "\[Gamma]0"}], "}"}]}], 
  "}"}]], "Output",
 CellChangeTimes->{{3.734796548688345*^9, 3.73479655252929*^9}, {
   3.7347967170884013`*^9, 3.734796721888465*^9}, {3.7347973021620812`*^9, 
   3.734797326718842*^9}, {3.7347975290808916`*^9, 3.734797539187497*^9}, 
   3.734797609702593*^9},ExpressionUUID->"00b1bad9-65e3-4ab9-8f65-\
090201cdc056"]
}, Open  ]],

Cell[TextData[{
 "Nun zur Berechnung der Twissparameter f\[UDoubleDot]r den letzten Teil, \
also f\[UDoubleDot]r den Quadropol und dem zweiten Dipol: (Kommentar: Wenn \
ich mich richtig erinnere dann m\[UDoubleDot]sste folgendes gelten: ",
 Cell[BoxData[
  FormBox[
   SubscriptBox["B", "1"], TraditionalForm]],
  FormatType->"TraditionalForm",ExpressionUUID->
  "8ff6ae52-a5c7-471d-b4c6-1eaef92bef0c"],
 " = M * ",
 Cell[BoxData[
  FormBox[
   SubscriptBox["B", "0"], TraditionalForm]],
  FormatType->"TraditionalForm",ExpressionUUID->
  "ff104c15-8821-449f-9c3f-3feda3f1eaac"],
 " * ",
 Cell[BoxData[
  FormBox[
   SuperscriptBox["M", "T"], TraditionalForm]],
  FormatType->"TraditionalForm",ExpressionUUID->
  "aebec6a3-f5b5-4431-bab3-9cab2818d8f0"],
 "(das steht so im Skript) und weiter sollte gelten (das habe ich nicht im \
Skript gefunden): \n",
 Cell[BoxData[
  FormBox[
   SubscriptBox["B", "2"], TraditionalForm]],
  FormatType->"TraditionalForm",ExpressionUUID->
  "410ea17f-d51e-42f5-9957-fe3fb80c1721"],
 " = M * ",
 Cell[BoxData[
  FormBox[
   SubscriptBox["B", "1"], TraditionalForm]],
  FormatType->"TraditionalForm",ExpressionUUID->
  "16c4dc2d-018b-4a23-bdce-39c9b7107ad2"],
 " * ",
 Cell[BoxData[
  FormBox[
   SuperscriptBox["M", "T"], TraditionalForm]],
  FormatType->"TraditionalForm",ExpressionUUID->
  "efff217a-2a72-4568-a588-1b9546280814"],
 "= M * (M * ",
 Cell[BoxData[
  FormBox[
   SubscriptBox["B", "0"], TraditionalForm]],
  FormatType->"TraditionalForm",ExpressionUUID->
  "be0a76d8-69a8-4e25-9bde-e00bd7c100f3"],
 " * ",
 Cell[BoxData[
  FormBox[
   SuperscriptBox["M", "T"], TraditionalForm]],
  FormatType->"TraditionalForm",ExpressionUUID->
  "d898cbab-bcb4-4b1a-a14a-249ae31df1f0"],
 ") * ",
 Cell[BoxData[
  FormBox[
   SuperscriptBox["M", "T"], TraditionalForm]],
  FormatType->"TraditionalForm",ExpressionUUID->
  "3256f5b4-8063-42b5-883e-0c13cdf049b7"],
 "; wenn das nicht richtig ist, musst du ab hier einiges korrigieren :( )"
}], "Text",
 InitializationCell->True,
 CellChangeTimes->{{3.734796769764433*^9, 3.7347968413456535`*^9}, {
   3.7347968715871153`*^9, 3.7347970632967587`*^9}, 
   3.7347974739877462`*^9},ExpressionUUID->"eacafd8d-9ae8-48fd-9946-\
b9dcf607cadd"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  RowBox[{"twissqd2", "[", 
   RowBox[{"s_", ",", "f_"}], "]"}], "=", 
  RowBox[{
   RowBox[{
    RowBox[{"drift", "[", "s", "]"}], ".", 
    RowBox[{"(", 
     RowBox[{
      RowBox[{"quad", "[", "f", "]"}], ".", "bmat", ".", 
      RowBox[{"Transpose", "[", 
       RowBox[{"quad", "[", "f", "]"}], "]"}]}], ")"}], ".", 
    RowBox[{"Transpose", "[", 
     RowBox[{"drift", "[", "s", "]"}], "]"}]}], "//", 
   "FullSimplify"}]}]], "Input",
 CellChangeTimes->{{3.7347970739563136`*^9, 3.734797165152977*^9}, {
  3.7347973113639317`*^9, 3.734797319312942*^9}, {3.7347975216610236`*^9, 
  3.7347975228994656`*^9}},ExpressionUUID->"cda7b4dd-5cf0-4d7d-bb9d-\
f294c20a994b"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
   RowBox[{"{", 
    RowBox[{
     RowBox[{
      FractionBox[
       RowBox[{
        RowBox[{"(", 
         RowBox[{"f", "-", "s"}], ")"}], " ", 
        RowBox[{"(", 
         RowBox[{
          RowBox[{
           RowBox[{"-", "s"}], " ", "\[Beta]0"}], "+", 
          RowBox[{"f", " ", 
           RowBox[{"(", 
            RowBox[{
             RowBox[{
              RowBox[{"-", "2"}], " ", "s", " ", "\[Alpha]0"}], "+", 
             "\[Beta]0"}], ")"}]}]}], ")"}]}], 
       SuperscriptBox["f", "2"]], "+", 
      RowBox[{
       SuperscriptBox["s", "2"], " ", "\[Gamma]0"}]}], ",", 
     RowBox[{
      RowBox[{
       RowBox[{"(", 
        RowBox[{
         RowBox[{"-", "1"}], "+", 
         FractionBox[
          RowBox[{"2", " ", "s"}], "f"]}], ")"}], " ", "\[Alpha]0"}], "+", 
      FractionBox[
       RowBox[{
        RowBox[{"(", 
         RowBox[{
          RowBox[{"-", "f"}], "+", "s"}], ")"}], " ", "\[Beta]0"}], 
       SuperscriptBox["f", "2"]], "+", 
      RowBox[{"s", " ", "\[Gamma]0"}]}]}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{
     RowBox[{
      RowBox[{
       RowBox[{"(", 
        RowBox[{
         RowBox[{"-", "1"}], "+", 
         FractionBox[
          RowBox[{"2", " ", "s"}], "f"]}], ")"}], " ", "\[Alpha]0"}], "+", 
      FractionBox[
       RowBox[{
        RowBox[{"(", 
         RowBox[{
          RowBox[{"-", "f"}], "+", "s"}], ")"}], " ", "\[Beta]0"}], 
       SuperscriptBox["f", "2"]], "+", 
      RowBox[{"s", " ", "\[Gamma]0"}]}], ",", 
     RowBox[{
      FractionBox[
       RowBox[{
        RowBox[{"2", " ", "f", " ", "\[Alpha]0"}], "+", "\[Beta]0"}], 
       SuperscriptBox["f", "2"]], "+", "\[Gamma]0"}]}], "}"}]}], 
  "}"}]], "Output",
 CellChangeTimes->{{3.7347971532832823`*^9, 3.7347971657301283`*^9}, 
   3.7347973267298594`*^9, {3.7347975233882775`*^9, 3.7347975393842998`*^9}, 
   3.7347976121324296`*^9},ExpressionUUID->"dbcea2a1-7e99-4998-bf8d-\
46d153ccd566"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  RowBox[{"\[Beta]", "[", 
   RowBox[{"s_", ",", "f_"}], "]"}], "=", 
  RowBox[{"\[Piecewise]", GridBox[{
     {
      RowBox[{
       RowBox[{"twissd1", "[", "s", "]"}], "[", 
       RowBox[{"[", 
        RowBox[{"1", ",", "1"}], "]"}], "]"}], 
      RowBox[{"s", "<=", "L"}]},
     {
      RowBox[{
       RowBox[{"twissqd2", "[", 
        RowBox[{
         RowBox[{"s", "-", "L"}], ",", "f"}], "]"}], "[", 
       RowBox[{"[", 
        RowBox[{"1", ",", "1"}], "]"}], "]"}], 
      RowBox[{"L", "<", "s", "\[LessEqual]", 
       RowBox[{"2", "*", "L"}]}]}
    }]}]}]], "Input",
 CellChangeTimes->{{3.725708794257989*^9, 3.7257089911849365`*^9}, 
   3.7257091377138677`*^9, 3.7257102004686766`*^9, 3.7257104019392385`*^9, {
   3.7257105093315787`*^9, 3.7257106087063923`*^9}, {3.7258643978706255`*^9, 
   3.7258644142769923`*^9}, {3.7258645605888057`*^9, 
   3.7258645952309685`*^9}, {3.7258646351148696`*^9, 
   3.7258646368512735`*^9}, {3.725864772157258*^9, 3.725864858920347*^9}, {
   3.72586491350354*^9, 3.725864921933281*^9}, {3.7258650753666887`*^9, 
   3.7258651109474354`*^9}, {3.734793175379659*^9, 3.7347932004016457`*^9}, {
   3.7347932311864605`*^9, 3.7347932409010572`*^9}, {3.7347933951229973`*^9, 
   3.734793406563079*^9}, {3.734793457698424*^9, 3.734793582707088*^9}, {
   3.7347937076993484`*^9, 3.734793721922683*^9}, {3.7347937594576597`*^9, 
   3.7347937676662903`*^9}, {3.734793872274322*^9, 3.734793873729724*^9}, {
   3.7347939096355796`*^9, 3.73479394997089*^9}, {3.734794103154763*^9, 
   3.734794115057398*^9}, 3.7347955602254624`*^9, {3.734795603922512*^9, 
   3.7347956161460466`*^9}, {3.73479740081851*^9, 
   3.734797432147045*^9}},ExpressionUUID->"aa4be4cc-a825-4e8a-9136-\
d8fe7fd601b6"],

Cell[BoxData[
 TagBox[GridBox[{
    {"\[Piecewise]", GridBox[{
       {
        RowBox[{
         RowBox[{
          RowBox[{"-", "2"}], " ", "s", " ", "\[Alpha]0"}], "+", "\[Beta]0", 
         "+", 
         RowBox[{
          SuperscriptBox["s", "2"], " ", "\[Gamma]0"}]}], 
        RowBox[{"s", "\[LessEqual]", "L"}]},
       {
        RowBox[{
         FractionBox[
          RowBox[{
           RowBox[{"(", 
            RowBox[{"f", "+", "L", "-", "s"}], ")"}], " ", 
           RowBox[{"(", 
            RowBox[{
             RowBox[{
              RowBox[{"-", 
               RowBox[{"(", 
                RowBox[{
                 RowBox[{"-", "L"}], "+", "s"}], ")"}]}], " ", "\[Beta]0"}], 
             "+", 
             RowBox[{"f", " ", 
              RowBox[{"(", 
               RowBox[{
                RowBox[{
                 RowBox[{"-", "2"}], " ", 
                 RowBox[{"(", 
                  RowBox[{
                   RowBox[{"-", "L"}], "+", "s"}], ")"}], " ", "\[Alpha]0"}], 
                "+", "\[Beta]0"}], ")"}]}]}], ")"}]}], 
          SuperscriptBox["f", "2"]], "+", 
         RowBox[{
          SuperscriptBox[
           RowBox[{"(", 
            RowBox[{
             RowBox[{"-", "L"}], "+", "s"}], ")"}], "2"], " ", 
          "\[Gamma]0"}]}], 
        RowBox[{"L", "<", "s", "\[LessEqual]", 
         RowBox[{"2", " ", "L"}]}]},
       {"0", 
        TagBox["True",
         "PiecewiseDefault",
         AutoDelete->True]}
      },
      AllowedDimensions->{2, Automatic},
      Editable->True,
      GridBoxAlignment->{
       "Columns" -> {{Left}}, "ColumnsIndexed" -> {}, "Rows" -> {{Baseline}}, 
        "RowsIndexed" -> {}},
      GridBoxItemSize->{
       "Columns" -> {{Automatic}}, "ColumnsIndexed" -> {}, "Rows" -> {{1.}}, 
        "RowsIndexed" -> {}},
      GridBoxSpacings->{"Columns" -> {
          Offset[0.27999999999999997`], {
           Offset[0.84]}, 
          Offset[0.27999999999999997`]}, "ColumnsIndexed" -> {}, "Rows" -> {
          Offset[0.2], {
           Offset[0.4]}, 
          Offset[0.2]}, "RowsIndexed" -> {}},
      Selectable->True]}
   },
   GridBoxAlignment->{
    "Columns" -> {{Left}}, "ColumnsIndexed" -> {}, "Rows" -> {{Baseline}}, 
     "RowsIndexed" -> {}},
   GridBoxItemSize->{
    "Columns" -> {{Automatic}}, "ColumnsIndexed" -> {}, "Rows" -> {{1.}}, 
     "RowsIndexed" -> {}},
   GridBoxSpacings->{"Columns" -> {
       Offset[0.27999999999999997`], {
        Offset[0.35]}, 
       Offset[0.27999999999999997`]}, "ColumnsIndexed" -> {}, "Rows" -> {
       Offset[0.2], {
        Offset[0.4]}, 
       Offset[0.2]}, "RowsIndexed" -> {}}],
  "Piecewise",
  DeleteWithContents->True,
  Editable->False,
  SelectWithContents->True,
  Selectable->False]], "Output",
 CellChangeTimes->{3.734797433864771*^9, 3.7347975394043303`*^9, 
  3.7347976122260737`*^9},ExpressionUUID->"640040a1-cfed-4a65-b73f-\
8edd2a8cc010"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  RowBox[{"\[Alpha]", "[", 
   RowBox[{"s_", ",", "f_"}], "]"}], "=", 
  RowBox[{"\[Piecewise]", GridBox[{
     {
      RowBox[{"-", 
       RowBox[{
        RowBox[{"twissd1", "[", "s", "]"}], "[", 
        RowBox[{"[", 
         RowBox[{"1", ",", "2"}], "]"}], "]"}]}], 
      RowBox[{"s", "<=", "L"}]},
     {
      RowBox[{"-", 
       RowBox[{
        RowBox[{"twissqd2", "[", 
         RowBox[{
          RowBox[{"s", "-", "L"}], ",", "f"}], "]"}], "[", 
        RowBox[{"[", 
         RowBox[{"1", ",", "2"}], "]"}], "]"}]}], 
      RowBox[{"L", "<", "s", "\[LessEqual]", 
       RowBox[{"2", "*", "L"}]}]}
    }]}]}]], "Input",
 CellChangeTimes->{{3.725708794257989*^9, 3.7257089911849365`*^9}, 
   3.7257091377138677`*^9, 3.7257102004686766`*^9, 3.7257104019392385`*^9, {
   3.7257105093315787`*^9, 3.7257106087063923`*^9}, {3.7258643978706255`*^9, 
   3.7258644142769923`*^9}, {3.7258645605888057`*^9, 
   3.7258645952309685`*^9}, {3.7258646351148696`*^9, 
   3.7258646368512735`*^9}, {3.725864772157258*^9, 3.725864858920347*^9}, {
   3.72586491350354*^9, 3.725864921933281*^9}, {3.7258650753666887`*^9, 
   3.7258651109474354`*^9}, {3.734793175379659*^9, 3.7347932004016457`*^9}, {
   3.7347932311864605`*^9, 3.7347932409010572`*^9}, {3.7347933951229973`*^9, 
   3.734793406563079*^9}, {3.734793457698424*^9, 3.734793582707088*^9}, {
   3.7347937076993484`*^9, 3.734793721922683*^9}, {3.7347937594576597`*^9, 
   3.7347937676662903`*^9}, {3.734793872274322*^9, 3.734793873729724*^9}, {
   3.7347939096355796`*^9, 3.73479394997089*^9}, {3.734794103154763*^9, 
   3.734794115057398*^9}, 3.7347955602254624`*^9, {3.734795603922512*^9, 
   3.7347956161460466`*^9}, {3.73479740081851*^9, 3.7347974584982862`*^9}, {
   3.734797509618501*^9, 
   3.734797515331023*^9}},ExpressionUUID->"b6c94607-d269-4529-bc81-\
bc7c21d935ec"],

Cell[BoxData[
 TagBox[GridBox[{
    {"\[Piecewise]", GridBox[{
       {
        RowBox[{"\[Alpha]0", "-", 
         RowBox[{"s", " ", "\[Gamma]0"}]}], 
        RowBox[{"s", "\[LessEqual]", "L"}]},
       {
        RowBox[{
         RowBox[{
          RowBox[{"-", 
           RowBox[{"(", 
            RowBox[{
             RowBox[{"-", "1"}], "+", 
             FractionBox[
              RowBox[{"2", " ", 
               RowBox[{"(", 
                RowBox[{
                 RowBox[{"-", "L"}], "+", "s"}], ")"}]}], "f"]}], ")"}]}], 
          " ", "\[Alpha]0"}], "-", 
         FractionBox[
          RowBox[{
           RowBox[{"(", 
            RowBox[{
             RowBox[{"-", "f"}], "-", "L", "+", "s"}], ")"}], " ", 
           "\[Beta]0"}], 
          SuperscriptBox["f", "2"]], "-", 
         RowBox[{
          RowBox[{"(", 
           RowBox[{
            RowBox[{"-", "L"}], "+", "s"}], ")"}], " ", "\[Gamma]0"}]}], 
        RowBox[{"L", "<", "s", "\[LessEqual]", 
         RowBox[{"2", " ", "L"}]}]},
       {"0", 
        TagBox["True",
         "PiecewiseDefault",
         AutoDelete->True]}
      },
      AllowedDimensions->{2, Automatic},
      Editable->True,
      GridBoxAlignment->{
       "Columns" -> {{Left}}, "ColumnsIndexed" -> {}, "Rows" -> {{Baseline}}, 
        "RowsIndexed" -> {}},
      GridBoxItemSize->{
       "Columns" -> {{Automatic}}, "ColumnsIndexed" -> {}, "Rows" -> {{1.}}, 
        "RowsIndexed" -> {}},
      GridBoxSpacings->{"Columns" -> {
          Offset[0.27999999999999997`], {
           Offset[0.84]}, 
          Offset[0.27999999999999997`]}, "ColumnsIndexed" -> {}, "Rows" -> {
          Offset[0.2], {
           Offset[0.4]}, 
          Offset[0.2]}, "RowsIndexed" -> {}},
      Selectable->True]}
   },
   GridBoxAlignment->{
    "Columns" -> {{Left}}, "ColumnsIndexed" -> {}, "Rows" -> {{Baseline}}, 
     "RowsIndexed" -> {}},
   GridBoxItemSize->{
    "Columns" -> {{Automatic}}, "ColumnsIndexed" -> {}, "Rows" -> {{1.}}, 
     "RowsIndexed" -> {}},
   GridBoxSpacings->{"Columns" -> {
       Offset[0.27999999999999997`], {
        Offset[0.35]}, 
       Offset[0.27999999999999997`]}, "ColumnsIndexed" -> {}, "Rows" -> {
       Offset[0.2], {
        Offset[0.4]}, 
       Offset[0.2]}, "RowsIndexed" -> {}}],
  "Piecewise",
  DeleteWithContents->True,
  Editable->False,
  SelectWithContents->True,
  Selectable->False]], "Output",
 CellChangeTimes->{{3.734797515785664*^9, 3.734797539419854*^9}, 
   3.7347976122395945`*^9},ExpressionUUID->"2696e8fc-43c0-419f-b18f-\
5e04b542cefb"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  RowBox[{"\[Gamma]", "[", 
   RowBox[{"s_", ",", "f_"}], "]"}], "=", 
  RowBox[{"\[Piecewise]", GridBox[{
     {
      RowBox[{
       RowBox[{"twissd1", "[", "s", "]"}], "[", 
       RowBox[{"[", 
        RowBox[{"2", ",", "2"}], "]"}], "]"}], 
      RowBox[{"s", "<=", "L"}]},
     {
      RowBox[{
       RowBox[{"twissqd2", "[", 
        RowBox[{
         RowBox[{"s", "-", "L"}], ",", "f"}], "]"}], "[", 
       RowBox[{"[", 
        RowBox[{"2", ",", "2"}], "]"}], "]"}], 
      RowBox[{"L", "<", "s", "\[LessEqual]", 
       RowBox[{"2", "*", "L"}]}]}
    }]}]}]], "Input",
 CellChangeTimes->{{3.725708794257989*^9, 3.7257089911849365`*^9}, 
   3.7257091377138677`*^9, 3.7257102004686766`*^9, 3.7257104019392385`*^9, {
   3.7257105093315787`*^9, 3.7257106087063923`*^9}, {3.7258643978706255`*^9, 
   3.7258644142769923`*^9}, {3.7258645605888057`*^9, 
   3.7258645952309685`*^9}, {3.7258646351148696`*^9, 
   3.7258646368512735`*^9}, {3.725864772157258*^9, 3.725864858920347*^9}, {
   3.72586491350354*^9, 3.725864921933281*^9}, {3.7258650753666887`*^9, 
   3.7258651109474354`*^9}, {3.734793175379659*^9, 3.7347932004016457`*^9}, {
   3.7347932311864605`*^9, 3.7347932409010572`*^9}, {3.7347933951229973`*^9, 
   3.734793406563079*^9}, {3.734793457698424*^9, 3.734793582707088*^9}, {
   3.7347937076993484`*^9, 3.734793721922683*^9}, {3.7347937594576597`*^9, 
   3.7347937676662903`*^9}, {3.734793872274322*^9, 3.734793873729724*^9}, {
   3.7347939096355796`*^9, 3.73479394997089*^9}, {3.734794103154763*^9, 
   3.734794115057398*^9}, 3.7347955602254624`*^9, {3.734795603922512*^9, 
   3.7347956161460466`*^9}, {3.73479740081851*^9, 3.7347974584982862`*^9}, {
   3.734797509618501*^9, 3.734797515331023*^9}, {3.734797552033772*^9, 
   3.734797567025613*^9}},ExpressionUUID->"331b3f4d-4f47-4bfa-9172-\
2ba4fa61a3e7"],

Cell[BoxData[
 TagBox[GridBox[{
    {"\[Piecewise]", GridBox[{
       {"\[Gamma]0", 
        RowBox[{"s", "\[LessEqual]", "L"}]},
       {
        RowBox[{
         FractionBox[
          RowBox[{
           RowBox[{"2", " ", "f", " ", "\[Alpha]0"}], "+", "\[Beta]0"}], 
          SuperscriptBox["f", "2"]], "+", "\[Gamma]0"}], 
        RowBox[{"L", "<", "s", "\[LessEqual]", 
         RowBox[{"2", " ", "L"}]}]},
       {"0", 
        TagBox["True",
         "PiecewiseDefault",
         AutoDelete->True]}
      },
      AllowedDimensions->{2, Automatic},
      Editable->True,
      GridBoxAlignment->{
       "Columns" -> {{Left}}, "ColumnsIndexed" -> {}, "Rows" -> {{Baseline}}, 
        "RowsIndexed" -> {}},
      GridBoxItemSize->{
       "Columns" -> {{Automatic}}, "ColumnsIndexed" -> {}, "Rows" -> {{1.}}, 
        "RowsIndexed" -> {}},
      GridBoxSpacings->{"Columns" -> {
          Offset[0.27999999999999997`], {
           Offset[0.84]}, 
          Offset[0.27999999999999997`]}, "ColumnsIndexed" -> {}, "Rows" -> {
          Offset[0.2], {
           Offset[0.4]}, 
          Offset[0.2]}, "RowsIndexed" -> {}},
      Selectable->True]}
   },
   GridBoxAlignment->{
    "Columns" -> {{Left}}, "ColumnsIndexed" -> {}, "Rows" -> {{Baseline}}, 
     "RowsIndexed" -> {}},
   GridBoxItemSize->{
    "Columns" -> {{Automatic}}, "ColumnsIndexed" -> {}, "Rows" -> {{1.}}, 
     "RowsIndexed" -> {}},
   GridBoxSpacings->{"Columns" -> {
       Offset[0.27999999999999997`], {
        Offset[0.35]}, 
       Offset[0.27999999999999997`]}, "ColumnsIndexed" -> {}, "Rows" -> {
       Offset[0.2], {
        Offset[0.4]}, 
       Offset[0.2]}, "RowsIndexed" -> {}}],
  "Piecewise",
  DeleteWithContents->True,
  Editable->False,
  SelectWithContents->True,
  Selectable->False]], "Output",
 CellChangeTimes->{3.7347975675260315`*^9, 
  3.73479761224961*^9},ExpressionUUID->"7c070be6-5edd-486f-8ae0-7b07acb4e794"]
}, Open  ]]
}, Open  ]]
}, Open  ]]
},
WindowSize->{1920, 1037},
WindowMargins->{{-8, Automatic}, {Automatic, -8}},
FrontEndVersion->"11.2 for Microsoft Windows (64-bit) (September 10, 2017)",
StyleDefinitions->"Default.nb"
]
(* End of Notebook Content *)

(* Internal cache information *)
(*CellTagsOutline
CellTagsIndex->{}
*)
(*CellTagsIndex
CellTagsIndex->{}
*)
(*NotebookFileOutline
Notebook[{
Cell[CellGroupData[{
Cell[580, 22, 395, 6, 96, "Title",ExpressionUUID->"93bbad7c-f06f-43d7-9405-864be9d6e68b"],
Cell[978, 30, 170, 3, 34, "Text",ExpressionUUID->"35f4395c-b0da-40de-80a0-494156ecd658"],
Cell[1151, 35, 164, 3, 34, "Text",ExpressionUUID->"e0bbb0f9-3343-4c93-95ee-1e8cbd3bdece"],
Cell[1318, 40, 1169, 30, 32, "Input",ExpressionUUID->"173db715-a89e-4256-b66b-1030d455bf48"],
Cell[CellGroupData[{
Cell[2512, 74, 180, 3, 67, "Section",ExpressionUUID->"44dec455-dd13-42df-8a37-324b210522ff"],
Cell[2695, 79, 198, 3, 34, "Text",ExpressionUUID->"6d78e088-7db3-4e3b-ad93-0b35ac78b486"],
Cell[2896, 84, 750, 19, 28, "Input",ExpressionUUID->"0cb4ccb9-0f7d-400c-84d9-6c08b6f01fc3"],
Cell[3649, 105, 1332, 36, 52, "Input",ExpressionUUID->"fa5c1aa1-077f-4d4e-a710-70f5ab4264cc"],
Cell[4984, 143, 176, 3, 34, "Text",ExpressionUUID->"83b561ee-3ce7-48ee-bba7-cae00f425e6f"],
Cell[5163, 148, 354, 10, 52, "Input",ExpressionUUID->"135e19f8-2e76-4538-90a9-9ca0dc14966a"],
Cell[5520, 160, 500, 11, 28, "Input",ExpressionUUID->"375e516d-0c14-4b1b-8c45-ef136321b73c"],
Cell[6023, 173, 206, 4, 34, "Text",ExpressionUUID->"83a6313e-6715-4f38-8ecc-cf1698180dfe"],
Cell[CellGroupData[{
Cell[6254, 181, 1419, 32, 28, "Input",ExpressionUUID->"ec37c16a-6c65-45f8-bfbe-77e7b3c68403"],
Cell[7676, 215, 2410, 56, 70, "Output",ExpressionUUID->"426818c4-906f-4e94-9646-81cb4c368b5b"]
}, Open  ]],
Cell[CellGroupData[{
Cell[10123, 276, 286, 7, 28, "Input",ExpressionUUID->"c1c2b73e-c8a3-4441-bcfe-a11a5a349aaf"],
Cell[10412, 285, 783, 16, 57, "Output",ExpressionUUID->"3fdccc9e-1fcf-4100-a2c8-4b04b1bdcce9"]
}, Open  ]],
Cell[11210, 304, 247, 6, 34, "Text",ExpressionUUID->"dc95be2f-45e3-4364-84ed-1f4fbfc1b72e"],
Cell[CellGroupData[{
Cell[11482, 314, 160, 3, 44, "Subsubsection",ExpressionUUID->"867f1970-835c-4be7-a4c2-26df64fe7817"],
Cell[11645, 319, 286, 6, 34, "Text",ExpressionUUID->"59038713-a92c-4673-b85b-0aa287fa1328"],
Cell[CellGroupData[{
Cell[11956, 329, 752, 19, 28, "Input",ExpressionUUID->"aca70666-87b5-43ea-8a2c-ef4d5df146bd"],
Cell[12711, 350, 629, 11, 32, "Output",ExpressionUUID->"aeb8d157-06d9-4d5b-8a0b-34d20b9f08a8"]
}, Open  ]],
Cell[13355, 364, 175, 3, 34, "Text",ExpressionUUID->"4c583fc5-1048-4fa8-8da1-3f913c3f6ba9"],
Cell[CellGroupData[{
Cell[13555, 371, 589, 15, 28, "Input",ExpressionUUID->"b0d51b77-eebb-445c-be70-eb14dc905b29"],
Cell[14147, 388, 713, 15, 55, "Output",ExpressionUUID->"c4769d4e-db80-4b5c-97c3-f35c4b7ab1b9"]
}, Open  ]],
Cell[14875, 406, 409, 8, 34, "Text",ExpressionUUID->"e46b5d0b-114c-476e-a453-0dca80e17a09"],
Cell[CellGroupData[{
Cell[15309, 418, 524, 15, 28, "Input",ExpressionUUID->"bb478731-3d42-47e2-a9da-020b3877a610"],
Cell[15836, 435, 715, 17, 55, "Output",ExpressionUUID->"fa99b8b1-de4d-4b83-a6d3-553020387607"]
}, Open  ]],
Cell[16566, 455, 374, 7, 34, "Text",ExpressionUUID->"41cfb96d-bac9-4d94-9856-f42d15f7be78"],
Cell[CellGroupData[{
Cell[16965, 466, 1512, 38, 28, "Input",ExpressionUUID->"31aa313c-7a43-4ffa-8028-cad451c0bf6d"],
Cell[18480, 506, 1288, 33, 57, "Output",ExpressionUUID->"17d2544b-9254-4f3b-9dc2-42c9e525c0b7"]
}, Open  ]],
Cell[CellGroupData[{
Cell[19805, 544, 1676, 34, 44, "Input",ExpressionUUID->"01d492b6-fa48-4edb-88ce-f5501c58eaa5"],
Cell[21484, 580, 2534, 67, 93, "Output",ExpressionUUID->"35786c0c-2409-4387-8131-430a7b34ed57"]
}, Open  ]],
Cell[CellGroupData[{
Cell[24055, 652, 762, 19, 28, "Input",ExpressionUUID->"f722159b-45fc-4347-98c9-3ea13cb76207"],
Cell[24820, 673, 6619, 127, 239, "Output",ExpressionUUID->"de15ad4d-b43e-41f0-83e3-f6f7bb56926a"]
}, Open  ]]
}, Open  ]]
}, Open  ]],
Cell[CellGroupData[{
Cell[31500, 807, 198, 3, 67, "Section",ExpressionUUID->"45c4c865-3081-4b31-ae62-a5517d7c9d30"],
Cell[CellGroupData[{
Cell[31723, 814, 505, 14, 28, "Input",ExpressionUUID->"f77b83c7-613f-4e68-9c81-ac1dfdb59ae1"],
Cell[32231, 830, 471, 12, 32, "Output",ExpressionUUID->"2792a8a8-82e2-4f0c-9db1-809abc953980"]
}, Open  ]],
Cell[32717, 845, 362, 11, 28, "Input",ExpressionUUID->"ca1d149b-0cbf-44d6-ae80-4d6d83e7382f"],
Cell[33082, 858, 407, 13, 54, "Input",ExpressionUUID->"544b9f8b-d288-4e8b-bd54-e3e4f31e8ecc"],
Cell[33492, 873, 214, 4, 34, "Text",ExpressionUUID->"e51a103c-b3c6-4fdd-a732-2ff3f0e30873"],
Cell[CellGroupData[{
Cell[33731, 881, 545, 13, 28, "Input",ExpressionUUID->"7c2cf80e-c9ba-4009-b938-cdf215a36ef8"],
Cell[34279, 896, 839, 23, 36, "Output",ExpressionUUID->"00b1bad9-65e3-4ab9-8f65-090201cdc056"]
}, Open  ]],
Cell[35133, 922, 2217, 64, 56, "Text",ExpressionUUID->"eacafd8d-9ae8-48fd-9946-b9dcf607cadd",
 InitializationCell->True],
Cell[CellGroupData[{
Cell[37375, 990, 694, 18, 28, "Input",ExpressionUUID->"cda7b4dd-5cf0-4d7d-bb9d-f294c20a994b"],
Cell[38072, 1010, 1973, 62, 58, "Output",ExpressionUUID->"dbcea2a1-7e99-4998-bf8d-46d153ccd566"]
}, Open  ]],
Cell[CellGroupData[{
Cell[40082, 1077, 1748, 37, 44, "Input",ExpressionUUID->"aa4be4cc-a825-4e8a-9136-d8fe7fd601b6"],
Cell[41833, 1116, 2907, 85, 81, "Output",ExpressionUUID->"640040a1-cfed-4a65-b73f-8edd2a8cc010"]
}, Open  ]],
Cell[CellGroupData[{
Cell[44777, 1206, 1855, 40, 44, "Input",ExpressionUUID->"b6c94607-d269-4529-bc81-bc7c21d935ec"],
Cell[46635, 1248, 2552, 75, 79, "Output",ExpressionUUID->"2696e8fc-43c0-419f-b18f-5e04b542cefb"]
}, Open  ]],
Cell[CellGroupData[{
Cell[49224, 1328, 1847, 38, 44, "Input",ExpressionUUID->"331b3f4d-4f47-4bfa-9172-2ba4fa61a3e7"],
Cell[51074, 1368, 1918, 54, 112, "Output",ExpressionUUID->"7c070be6-5edd-486f-8ae0-7b07acb4e794"]
}, Open  ]]
}, Open  ]]
}, Open  ]]
}
]
*)

