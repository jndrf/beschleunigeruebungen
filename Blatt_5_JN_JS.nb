(* Content-type: application/vnd.wolfram.mathematica *)

(*** Wolfram Notebook File ***)
(* http://www.wolfram.com/nb *)

(* CreatedBy='Mathematica 11.2' *)

(*CacheID: 234*)
(* Internal cache information:
NotebookFileLineBreakTest
NotebookFileLineBreakTest
NotebookDataPosition[       158,          7]
NotebookDataLength[     12000,        318]
NotebookOptionsPosition[     10297,        285]
NotebookOutlinePosition[     10646,        300]
CellTagsIndexPosition[     10603,        297]
WindowFrame->Normal*)

(* Beginning of Notebook Content *)
Notebook[{

Cell[CellGroupData[{
Cell["Blatt 5 - Optimierung der Emittanz im DBA-Lattice", "Title",
 CellChangeTimes->{{3.733150260850556*^9, 3.733150267458297*^9}, {
  3.7331503011552844`*^9, 3.7331503144025855`*^9}, {3.7341321039040036`*^9, 
  3.734132104034525*^9}, {3.734132785922567*^9, 3.7341327957290573`*^9}, {
  3.7346835053860807`*^9, 
  3.734683510321913*^9}},ExpressionUUID->"93bbad7c-f06f-43d7-9405-\
864be9d6e68b"],

Cell["Jonas Neundorf & Jan Skottke", "Text",
 CellChangeTimes->{{3.733150270690807*^9, 
  3.733150283127518*^9}},ExpressionUUID->"35f4395c-b0da-40de-80a0-\
494156ecd658"],

Cell["Definiere Konstanten", "Text",
 CellChangeTimes->{{3.734133492022656*^9, 
  3.7341335021797333`*^9}},ExpressionUUID->"e0bbb0f9-3343-4c93-95ee-\
1e8cbd3bdece"],

Cell[BoxData[
 RowBox[{
  RowBox[{"constants", "=", 
   RowBox[{"{", 
    RowBox[{
     RowBox[{"c", "\[Rule]", " ", 
      RowBox[{"3.", "*", 
       SuperscriptBox["10", "8"]}]}], ",", " ", 
     RowBox[{"q", "\[Rule]", " ", 
      RowBox[{"1.602", "*", 
       SuperscriptBox["10", 
        RowBox[{"-", "19"}]]}]}], ",", 
     RowBox[{"m", "\[Rule]", " ", 
      RowBox[{"0.511", "*", 
       SuperscriptBox["10", 
        RowBox[{"-", "3"}]]}]}], ",", 
     RowBox[{"r0", "\[Rule]", " ", 
      RowBox[{"2.818", "*", 
       SuperscriptBox["10", 
        RowBox[{"-", "15"}]]}]}], ",", 
     RowBox[{"cq", "\[Rule]", " ", 
      RowBox[{"3.8", "*", 
       SuperscriptBox["10", 
        RowBox[{"-", "13"}]]}]}]}], "}"}]}], ";"}]], "Input",
 CellChangeTimes->{{3.7331503207570624`*^9, 3.7331503509464016`*^9}, 
   3.73315064304441*^9, {3.73315107837197*^9, 3.733151114802534*^9}, 
   3.7334717840711155`*^9, {3.73348073406295*^9, 3.733480736509141*^9}, {
   3.733480819374033*^9, 3.7334808294543314`*^9}, {3.7334809231839457`*^9, 
   3.733480991517853*^9}, {3.734133612385388*^9, 
   3.734133621761384*^9}},ExpressionUUID->"173db715-a89e-4256-b66b-\
1030d455bf48"],

Cell["Definiere die Matritzen f\[UDoubleDot]r die Magnete:", "Text",
 CellChangeTimes->{{3.7346864823209066`*^9, 
  3.7346865026895423`*^9}},ExpressionUUID->"6d78e088-7db3-4e3b-ad93-\
0b35ac78b486"],

Cell[BoxData[
 RowBox[{
  RowBox[{"mF", "[", "f_", "]"}], ":=", 
  RowBox[{"{", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{"1", ",", "0", ",", "0"}], "}"}], ",", 
    RowBox[{"{", 
     RowBox[{
      RowBox[{
       RowBox[{"-", "1"}], "/", "f"}], ",", "1", ",", "0"}], "}"}], ",", 
    RowBox[{"{", 
     RowBox[{"0", ",", "0", ",", "1"}], "}"}]}], "}"}], " ", 
  RowBox[{"(*", 
   RowBox[{"fokussierender", " ", "Quad"}], "*)"}]}]], "Input",
 CellChangeTimes->{{3.734683954086671*^9, 3.7346839840023055`*^9}, {
   3.7346840518110223`*^9, 3.734684056482964*^9}, {3.7346846466919384`*^9, 
   3.734684657041711*^9}, 3.7346847042106695`*^9, {3.7346858511582794`*^9, 
   3.734685862401821*^9}},ExpressionUUID->"0cb4ccb9-0f7d-400c-84d9-\
6c08b6f01fc3"],

Cell[BoxData[
 RowBox[{
  RowBox[{"mD", "[", 
   RowBox[{"s_", ",", " ", "\[Rho]_"}], "]"}], " ", ":=", " ", 
  RowBox[{
   RowBox[{"{", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{
       RowBox[{"Cos", "[", "\[Theta]", "]"}], ",", " ", 
       RowBox[{"\[Rho]", "*", 
        RowBox[{"Sin", "[", "\[Theta]", "]"}]}], ",", " ", 
       RowBox[{"\[Rho]", 
        RowBox[{"(", 
         RowBox[{"1", " ", "-", " ", 
          RowBox[{"Cos", "[", "\[Theta]", "]"}]}], ")"}]}]}], "}"}], ",", " ", 
     RowBox[{"{", 
      RowBox[{
       RowBox[{
        RowBox[{
         RowBox[{"-", "1"}], "/", "\[Rho]"}], " ", 
        RowBox[{"Sin", "[", "\[Theta]", "]"}]}], ",", " ", 
       RowBox[{"Cos", "[", "\[Theta]", "]"}], ",", " ", 
       RowBox[{"Sin", "[", "\[Theta]", "]"}]}], "}"}], ",", " ", 
     RowBox[{"{", 
      RowBox[{"0", ",", " ", "0", ",", " ", "1"}], "}"}]}], "}"}], "//.", 
   RowBox[{"\[Theta]", "\[Rule]", 
    RowBox[{"s", "/", "\[Rho]", " ", 
     RowBox[{"(*", "Dipol", "*)"}]}]}]}]}]], "Input",
 CellChangeTimes->{{3.7257085387348447`*^9, 3.725708562974574*^9}, {
  3.734685213939081*^9, 3.734685219329794*^9}, {3.7346858657940335`*^9, 
  3.734685871090122*^9}},ExpressionUUID->"fa5c1aa1-077f-4d4e-a710-\
70f5ab4264cc"],

Cell["Definiere Dispersionsfunktionen:", "Text",
 CellChangeTimes->{{3.7346865061139865`*^9, 
  3.734686524017215*^9}},ExpressionUUID->"83b561ee-3ce7-48ee-bba7-\
cae00f425e6f"],

Cell[BoxData[
 RowBox[{
  RowBox[{"\[Eta]", "[", "s_", "]"}], ":=", 
  RowBox[{"\[Rho]", "*", 
   RowBox[{"(", 
    RowBox[{"1", "-", 
     RowBox[{"Cos", "[", 
      FractionBox["s", "\[Rho]"], "]"}]}], ")"}]}]}]], "Input",
 CellChangeTimes->{{3.7346838450161924`*^9, 
  3.7346838619763327`*^9}},ExpressionUUID->"135e19f8-2e76-4538-90a9-\
9ca0dc14966a"],

Cell[BoxData[
 RowBox[{
  RowBox[{
   RowBox[{"d\[Eta]", "[", "s_", "]"}], "=", 
   RowBox[{"D", "[", 
    RowBox[{
     RowBox[{"\[Eta]", "[", "s", "]"}], ",", "s"}], "]"}]}], ";"}]], "Input",
 CellChangeTimes->{{3.7346838692042646`*^9, 3.7346838844020944`*^9}, {
   3.7346842327867537`*^9, 3.7346842344016056`*^9}, {3.7346843597477274`*^9, 
   3.734684360914852*^9}, 3.734684715715088*^9, 3.7346853899866495`*^9, 
   3.7346858442910137`*^9},ExpressionUUID->"375e516d-0c14-4b1b-8c45-\
ef136321b73c"],

Cell["Bestimmte f:", "Text",
 CellChangeTimes->{{3.7346865307544823`*^9, 
  3.734686536769641*^9}},ExpressionUUID->"83a6313e-6715-4f38-8ecc-\
cf1698180dfe"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"eq", "=", 
  RowBox[{
   RowBox[{
    RowBox[{"{", 
     RowBox[{"0", ",", "0", ",", "1"}], "}"}], "==", 
    RowBox[{
     RowBox[{"mD", "[", 
      RowBox[{"s", ",", "\[Rho]"}], "]"}], ".", 
     RowBox[{"mF", "[", "f", "]"}], ".", 
     RowBox[{"mD", "[", 
      RowBox[{"s", ",", "\[Rho]"}], "]"}], ".", 
     RowBox[{"{", 
      RowBox[{
       RowBox[{"\[Eta]", "[", "0", "]"}], ",", 
       RowBox[{"d\[Eta]", "[", "0", "]"}], ",", "1"}], "}"}]}]}], "//", 
   "FullSimplify", " ", 
   RowBox[{"(*", 
    RowBox[{
    "Dispersion", " ", "nach", " ", "dem", " ", "ersten", " ", "Dipol"}], 
    "*)"}]}]}]], "Input",
 CellChangeTimes->{{3.734684154501897*^9, 3.7346842102417784`*^9}, {
  3.734684243187643*^9, 3.7346842473936977`*^9}, {3.7346843718275805`*^9, 
  3.7346843997313504`*^9}, {3.734684543522272*^9, 3.734684563809834*^9}, {
  3.7346846624988155`*^9, 3.734684684690531*^9}, {3.734685088452454*^9, 
  3.734685105683077*^9}, {3.7346852397624907`*^9, 3.7346853214582205`*^9}, {
  3.7346854053315926`*^9, 3.7346854360495253`*^9}, {3.734685488882203*^9, 
  3.734685498067169*^9}, {3.7346855379068394`*^9, 3.734685549299032*^9}, {
  3.734685833139085*^9, 3.734685834946556*^9}, {3.7346858750741*^9, 
  3.734685917218063*^9}, {3.7346862473474236`*^9, 3.7346862945776834`*^9}, {
  3.734686377842142*^9, 
  3.7346864546099973`*^9}},ExpressionUUID->"ec37c16a-6c65-45f8-bfbe-\
77e7b3c68403"],

Cell[BoxData[
 RowBox[{
  RowBox[{"{", 
   RowBox[{"0", ",", "0", ",", "1"}], "}"}], "\[Equal]", 
  RowBox[{"{", 
   RowBox[{
    FractionBox[
     RowBox[{"\[Rho]", " ", 
      RowBox[{"(", 
       RowBox[{
        RowBox[{"2", " ", "f"}], "-", 
        RowBox[{"2", " ", "f", " ", 
         RowBox[{"Cos", "[", 
          FractionBox[
           RowBox[{"2", " ", "s"}], "\[Rho]"], "]"}]}], "-", 
        RowBox[{"2", " ", "\[Rho]", " ", 
         RowBox[{"Sin", "[", 
          FractionBox["s", "\[Rho]"], "]"}]}], "+", 
        RowBox[{"\[Rho]", " ", 
         RowBox[{"Sin", "[", 
          FractionBox[
           RowBox[{"2", " ", "s"}], "\[Rho]"], "]"}]}]}], ")"}]}], 
     RowBox[{"2", " ", "f"}]], ",", 
    FractionBox[
     RowBox[{
      RowBox[{"Cos", "[", 
       FractionBox["s", "\[Rho]"], "]"}], " ", 
      RowBox[{"(", 
       RowBox[{
        RowBox[{"\[Rho]", " ", 
         RowBox[{"(", 
          RowBox[{
           RowBox[{"-", "1"}], "+", 
           RowBox[{"Cos", "[", 
            FractionBox["s", "\[Rho]"], "]"}]}], ")"}]}], "+", 
        RowBox[{"2", " ", "f", " ", 
         RowBox[{"Sin", "[", 
          FractionBox["s", "\[Rho]"], "]"}]}]}], ")"}]}], "f"], ",", "1"}], 
   "}"}]}]], "Output",
 CellChangeTimes->{
  3.7346842117784557`*^9, 3.734684249169862*^9, {3.734684366760919*^9, 
   3.734684400181078*^9}, {3.7346845531720743`*^9, 3.7346845641725817`*^9}, {
   3.7346846802970257`*^9, 3.734684720961198*^9}, {3.7346850931889105`*^9, 
   3.7346851060562325`*^9}, {3.734685250265317*^9, 3.734685259311045*^9}, {
   3.7346852905938187`*^9, 3.7346853225852275`*^9}, {3.734685410290123*^9, 
   3.734685436490286*^9}, {3.734685491991643*^9, 3.7346854985964766`*^9}, {
   3.734685538774637*^9, 3.7346855495816545`*^9}, 3.734685835255063*^9, {
   3.7346858920522795`*^9, 3.7346859175598035`*^9}, 3.7346860911571856`*^9, {
   3.7346862563145123`*^9, 3.734686299004533*^9}, {3.734686406048256*^9, 
   3.7346864346066265`*^9}, {3.7346864685543137`*^9, 3.7346864766691103`*^9}, 
   3.7346865432557087`*^9, 
   3.734686634953203*^9},ExpressionUUID->"7ca14a98-34e0-48b1-b8d9-\
8dbff7638283"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"focus", "=", 
  RowBox[{"Solve", "[", 
   RowBox[{"eq", ",", "f"}], "]"}]}]], "Input",
 CellChangeTimes->{{3.7346864137173553`*^9, 3.734686420610449*^9}, {
  3.73468654734599*^9, 
  3.734686555777295*^9}},ExpressionUUID->"c1c2b73e-c8a3-4441-bcfe-\
a11a5a349aaf"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{"{", 
   RowBox[{"f", "\[Rule]", 
    RowBox[{
     FractionBox["1", "2"], " ", "\[Rho]", " ", 
     RowBox[{"Tan", "[", 
      FractionBox["s", 
       RowBox[{"2", " ", "\[Rho]"}]], "]"}]}]}], "}"}], "}"}]], "Output",
 CellChangeTimes->{{3.7346864209681063`*^9, 3.7346864367865324`*^9}, 
   3.734686476788294*^9, {3.7346865433047843`*^9, 3.7346865564513483`*^9}, 
   3.7346866371265445`*^9},ExpressionUUID->"345eaf8f-3a52-4506-b9d4-\
26f197969171"]
}, Open  ]]
}, Open  ]]
},
WindowSize->{1920, 1037},
WindowMargins->{{-8, Automatic}, {Automatic, -8}},
FrontEndVersion->"11.2 for Microsoft Windows (64-bit) (September 10, 2017)",
StyleDefinitions->"Default.nb"
]
(* End of Notebook Content *)

(* Internal cache information *)
(*CellTagsOutline
CellTagsIndex->{}
*)
(*CellTagsIndex
CellTagsIndex->{}
*)
(*NotebookFileOutline
Notebook[{
Cell[CellGroupData[{
Cell[580, 22, 395, 6, 96, "Title",ExpressionUUID->"93bbad7c-f06f-43d7-9405-864be9d6e68b"],
Cell[978, 30, 170, 3, 34, "Text",ExpressionUUID->"35f4395c-b0da-40de-80a0-494156ecd658"],
Cell[1151, 35, 164, 3, 34, "Text",ExpressionUUID->"e0bbb0f9-3343-4c93-95ee-1e8cbd3bdece"],
Cell[1318, 40, 1169, 30, 32, "Input",ExpressionUUID->"173db715-a89e-4256-b66b-1030d455bf48"],
Cell[2490, 72, 198, 3, 34, "Text",ExpressionUUID->"6d78e088-7db3-4e3b-ad93-0b35ac78b486"],
Cell[2691, 77, 750, 19, 28, "Input",ExpressionUUID->"0cb4ccb9-0f7d-400c-84d9-6c08b6f01fc3"],
Cell[3444, 98, 1246, 32, 28, "Input",ExpressionUUID->"fa5c1aa1-077f-4d4e-a710-70f5ab4264cc"],
Cell[4693, 132, 176, 3, 34, "Text",ExpressionUUID->"83b561ee-3ce7-48ee-bba7-cae00f425e6f"],
Cell[4872, 137, 354, 10, 52, "Input",ExpressionUUID->"135e19f8-2e76-4538-90a9-9ca0dc14966a"],
Cell[5229, 149, 500, 11, 28, "Input",ExpressionUUID->"375e516d-0c14-4b1b-8c45-ef136321b73c"],
Cell[5732, 162, 156, 3, 34, "Text",ExpressionUUID->"83a6313e-6715-4f38-8ecc-cf1698180dfe"],
Cell[CellGroupData[{
Cell[5913, 169, 1419, 32, 28, "Input",ExpressionUUID->"ec37c16a-6c65-45f8-bfbe-77e7b3c68403"],
Cell[7335, 203, 2119, 52, 70, "Output",ExpressionUUID->"7ca14a98-34e0-48b1-b8d9-8dbff7638283"]
}, Open  ]],
Cell[CellGroupData[{
Cell[9491, 260, 286, 7, 28, "Input",ExpressionUUID->"c1c2b73e-c8a3-4441-bcfe-a11a5a349aaf"],
Cell[9780, 269, 489, 12, 114, "Output",ExpressionUUID->"345eaf8f-3a52-4506-b9d4-26f197969171"]
}, Open  ]]
}, Open  ]]
}
]
*)

