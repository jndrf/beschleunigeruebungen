(* Content-type: application/vnd.wolfram.mathematica *)

(*** Wolfram Notebook File ***)
(* http://www.wolfram.com/nb *)

(* CreatedBy='Mathematica 11.2' *)

(*CacheID: 234*)
(* Internal cache information:
NotebookFileLineBreakTest
NotebookFileLineBreakTest
NotebookDataPosition[       158,          7]
NotebookDataLength[     16435,        457]
NotebookOptionsPosition[     14159,        418]
NotebookOutlinePosition[     14508,        433]
CellTagsIndexPosition[     14465,        430]
WindowFrame->Normal*)

(* Beginning of Notebook Content *)
Notebook[{

Cell[CellGroupData[{
Cell["Blatt 4 - Optimierung der Emittanz im FODO-Lattice", "Title",
 CellChangeTimes->{{3.733150260850556*^9, 3.733150267458297*^9}, {
  3.7331503011552844`*^9, 3.7331503144025855`*^9}, {3.7341321039040036`*^9, 
  3.734132104034525*^9}, {3.734132785922567*^9, 
  3.7341327957290573`*^9}},ExpressionUUID->"93bbad7c-f06f-43d7-9405-\
864be9d6e68b"],

Cell["Jonas Neundorf & Jan Skottke", "Text",
 CellChangeTimes->{{3.733150270690807*^9, 
  3.733150283127518*^9}},ExpressionUUID->"35f4395c-b0da-40de-80a0-\
494156ecd658"],

Cell["Definiere Konstanten", "Text",
 CellChangeTimes->{{3.734133492022656*^9, 
  3.7341335021797333`*^9}},ExpressionUUID->"e0bbb0f9-3343-4c93-95ee-\
1e8cbd3bdece"],

Cell[BoxData[
 RowBox[{
  RowBox[{"constants", "=", 
   RowBox[{"{", 
    RowBox[{
     RowBox[{"c", "\[Rule]", " ", 
      RowBox[{"3.", "*", 
       SuperscriptBox["10", "8"]}]}], ",", " ", 
     RowBox[{"q", "\[Rule]", " ", 
      RowBox[{"1.602", "*", 
       SuperscriptBox["10", 
        RowBox[{"-", "19"}]]}]}], ",", 
     RowBox[{"m", "\[Rule]", " ", 
      RowBox[{"0.511", "*", 
       SuperscriptBox["10", 
        RowBox[{"-", "3"}]]}]}], ",", 
     RowBox[{"r0", "\[Rule]", " ", 
      RowBox[{"2.818", "*", 
       SuperscriptBox["10", 
        RowBox[{"-", "15"}]]}]}], ",", 
     RowBox[{"cq", "\[Rule]", " ", 
      RowBox[{"3.8", "*", 
       SuperscriptBox["10", 
        RowBox[{"-", "13"}]]}]}]}], "}"}]}], ";"}]], "Input",
 CellChangeTimes->{{3.7331503207570624`*^9, 3.7331503509464016`*^9}, 
   3.73315064304441*^9, {3.73315107837197*^9, 3.733151114802534*^9}, 
   3.7334717840711155`*^9, {3.73348073406295*^9, 3.733480736509141*^9}, {
   3.733480819374033*^9, 3.7334808294543314`*^9}, {3.7334809231839457`*^9, 
   3.733480991517853*^9}, {3.734133612385388*^9, 
   3.734133621761384*^9}},ExpressionUUID->"173db715-a89e-4256-b66b-\
1030d455bf48"],

Cell["Definiere Twiss-Parameter", "Text",
 CellChangeTimes->{{3.7341335062270737`*^9, 
  3.734133522465787*^9}},ExpressionUUID->"ec47d2bb-ecc9-4fcf-8c21-\
0d9c728f82cb"],

Cell[BoxData[
 RowBox[{"\[Beta]", ":=", 
  FractionBox[
   RowBox[{"2", "*", 
    RowBox[{"(", 
     RowBox[{
      SuperscriptBox["s", "2"], "+", 
      RowBox[{"L", "*", "s", "*", 
       RowBox[{"(", 
        RowBox[{
         RowBox[{"-", "1"}], "+", 
         RowBox[{"2", "*", "\[Kappa]"}]}], ")"}]}], "+", 
      RowBox[{
       SuperscriptBox["L", "2"], "*", "\[Kappa]", "*", 
       RowBox[{"(", 
        RowBox[{
         RowBox[{"-", "1"}], "+", 
         RowBox[{"2", "*", "\[Kappa]"}]}], ")"}]}]}], ")"}]}], 
   RowBox[{"L", "*", 
    SqrtBox[
     RowBox[{
      RowBox[{"-", "1"}], "+", 
      RowBox[{"4", "*", 
       SuperscriptBox["\[Kappa]", "2"]}]}]]}]]}]], "Input",
 CellChangeTimes->{{3.734133147306425*^9, 3.734133193682085*^9}, {
  3.7341332265466776`*^9, 3.734133241153738*^9}, {3.7341334849626093`*^9, 
  3.7341334866736746`*^9}, {3.7341340113305893`*^9, 3.734134017027364*^9}, {
  3.7341340717941875`*^9, 
  3.734134099057737*^9}},ExpressionUUID->"a12003cd-8411-47e8-8a39-\
158deede777e"],

Cell[BoxData[
 RowBox[{"\[Alpha]", ":=", 
  RowBox[{
   RowBox[{"-", 
    FractionBox["1", "2"]}], "*", 
   RowBox[{"D", "[", 
    RowBox[{"\[Beta]", ",", "s"}], "]"}]}]}]], "Input",
 CellChangeTimes->{{3.7341333602645216`*^9, 3.734133406337612*^9}, {
  3.734134075058605*^9, 
  3.734134093696822*^9}},ExpressionUUID->"36082add-9393-4bf7-96be-\
d81b07adb634"],

Cell[BoxData[
 RowBox[{"\[Gamma]", ":=", 
  FractionBox[
   RowBox[{"(", 
    RowBox[{"1", "+", 
     SuperscriptBox["\[Alpha]", "2"]}], ")"}], "\[Beta]"]}]], "Input",
 CellChangeTimes->{{3.7341334229366198`*^9, 3.734133439540496*^9}, {
  3.73413407853119*^9, 
  3.73413409212962*^9}},ExpressionUUID->"2dfd9f51-49e1-440d-8342-\
be55483c4457"],

Cell["\<\
\[CapitalUDoubleDot]bernehme Funktionen von Blatt 3. Die Formeln sind der \
Musterl\[ODoubleDot]sung entnommen.\
\>", "Text",
 CellChangeTimes->{{3.7341335316335783`*^9, 
  3.7341335658255796`*^9}},ExpressionUUID->"3b9024c9-7603-481e-bf50-\
4fd81c94d69a"],

Cell[BoxData[
 RowBox[{
  RowBox[{"\[Eta]", "[", "s_", "]"}], ":=", 
  RowBox[{
   FractionBox["1", 
    RowBox[{"L", " ", "\[Theta]"}]], 
   RowBox[{"(", 
    RowBox[{
     RowBox[{"L", " ", 
      RowBox[{"Cos", "[", 
       FractionBox[
        RowBox[{"s", " ", "\[Theta]"}], "L"], "]"}], " ", 
      RowBox[{"(", 
       RowBox[{"s", "+", 
        RowBox[{"L", " ", 
         RowBox[{"(", 
          RowBox[{
           RowBox[{"-", "1"}], "+", "\[Kappa]"}], ")"}]}], "+", 
        RowBox[{
         RowBox[{"(", 
          RowBox[{"s", "+", 
           RowBox[{"L", " ", "\[Kappa]"}]}], ")"}], " ", 
         RowBox[{"Cos", "[", "\[Theta]", "]"}]}], "+", 
        RowBox[{"\[Theta]", " ", "\[Kappa]", " ", 
         RowBox[{"(", 
          RowBox[{"s", "+", 
           RowBox[{"2", " ", "L", " ", "\[Kappa]"}]}], ")"}], " ", 
         RowBox[{"Sin", "[", "\[Theta]", "]"}]}]}], ")"}]}], "+", 
     RowBox[{"L", " ", 
      RowBox[{"(", 
       RowBox[{"L", "-", 
        RowBox[{"2", " ", "s"}], "-", 
        RowBox[{"L", " ", "\[Kappa]"}], "-", 
        RowBox[{"L", " ", "\[Kappa]", " ", 
         RowBox[{"Cos", "[", "\[Theta]", "]"}]}], "+", 
        RowBox[{"\[Theta]", " ", "\[Kappa]", " ", 
         RowBox[{"(", 
          RowBox[{
           RowBox[{"-", "L"}], "+", "s", "+", 
           RowBox[{"2", " ", "L", " ", "\[Kappa]"}]}], ")"}], " ", 
         RowBox[{"Sin", "[", "\[Theta]", "]"}]}]}], ")"}]}], "+", 
     RowBox[{
      RowBox[{"(", 
       RowBox[{
        RowBox[{"\[Theta]", " ", 
         RowBox[{"(", 
          RowBox[{
           SuperscriptBox["s", "2"], "+", 
           RowBox[{"L", " ", "s", " ", 
            RowBox[{"(", 
             RowBox[{
              RowBox[{"-", "1"}], "+", 
              RowBox[{"2", " ", "\[Kappa]"}]}], ")"}]}], "+", 
           RowBox[{
            SuperscriptBox["L", "2"], " ", "\[Kappa]", " ", 
            RowBox[{"(", 
             RowBox[{
              RowBox[{"-", "1"}], "+", 
              RowBox[{"2", " ", "\[Kappa]"}]}], ")"}]}]}], ")"}]}], "-", 
        RowBox[{"L", " ", "\[Theta]", " ", "\[Kappa]", " ", 
         RowBox[{"(", 
          RowBox[{"s", "+", 
           RowBox[{"2", " ", "L", " ", "\[Kappa]"}]}], ")"}], " ", 
         RowBox[{"Cos", "[", "\[Theta]", "]"}]}], "+", 
        RowBox[{"L", " ", 
         RowBox[{"(", 
          RowBox[{"s", "+", 
           RowBox[{"L", " ", "\[Kappa]"}]}], ")"}], " ", 
         RowBox[{"Sin", "[", "\[Theta]", "]"}]}]}], ")"}], " ", 
      RowBox[{"Sin", "[", 
       FractionBox[
        RowBox[{"s", " ", "\[Theta]"}], "L"], "]"}]}]}], ")"}]}]}]], "Input",
 CellChangeTimes->{{3.734056693891981*^9, 3.734056694909753*^9}, 
   3.7341336442104893`*^9},ExpressionUUID->"29a9c1b5-f88d-4534-81a9-\
f4d880906a47"],

Cell[BoxData[
 RowBox[{"dd", " ", ":=", 
  RowBox[{
   RowBox[{"Series", "[", 
    RowBox[{
     RowBox[{
      RowBox[{
       RowBox[{"1", "/", "\[Rho]"}], "*", 
       RowBox[{
        RowBox[{"Integrate", "[", 
         RowBox[{
          RowBox[{"\[Eta]", "[", "s", "]"}], ",", 
          RowBox[{"{", 
           RowBox[{"s", ",", "0", ",", "L"}], "}"}]}], "]"}], "/", "L"}]}], 
      " ", "/.", " ", 
      RowBox[{"L", "\[Rule]", 
       RowBox[{"\[Rho]", "*", "\[Theta]"}]}]}], ",", 
     RowBox[{"{", 
      RowBox[{"\[Theta]", ",", "0", ",", "2"}], "}"}]}], "]"}], "//", 
   "Normal"}]}]], "Input",
 CellChangeTimes->{{3.7340567565133743`*^9, 3.734056800018149*^9}, {
   3.734133681345572*^9, 3.7341337249126153`*^9}, {3.734133771474372*^9, 
   3.7341337737150064`*^9}, 3.7341338090738316`*^9, {3.7341348217304363`*^9, 
   3.7341348366742506`*^9}},ExpressionUUID->"ca8c43ac-f2d5-497a-adea-\
fe192d8dc11d"],

Cell[BoxData[
 RowBox[{"\[Eta]ser", ":=", 
  RowBox[{
   RowBox[{"Series", "[", 
    RowBox[{
     RowBox[{"\[Eta]", "[", "s", "]"}], ",", 
     RowBox[{"{", 
      RowBox[{"\[Theta]", ",", "0", ",", "2"}], "}"}]}], "]"}], "//", 
   "Normal"}]}]], "Input",
 CellChangeTimes->{{3.734167772110485*^9, 
  3.7341678189138913`*^9}},ExpressionUUID->"e6842a35-6ba4-4a9a-bc32-\
8afa038d3a2a"],

Cell[BoxData[
 RowBox[{
  RowBox[{"h", "[", "s_", "]"}], ":=", 
  RowBox[{
   RowBox[{"\[Gamma]", "*", 
    SuperscriptBox[
     RowBox[{"(", "\[Eta]ser", ")"}], "2"]}], "+", 
   RowBox[{"2", "*", "\[Alpha]", "*", "\[Eta]ser", "*", 
    RowBox[{"D", "[", 
     RowBox[{"\[Eta]ser", ",", "s"}], "]"}]}], "+", 
   RowBox[{"\[Beta]", "*", 
    SuperscriptBox[
     RowBox[{"(", 
      RowBox[{"D", "[", 
       RowBox[{"\[Eta]ser", ",", "s"}], "]"}], ")"}], "2"]}]}]}]], "Input",
 CellChangeTimes->{{3.734133079797015*^9, 3.7341331145936785`*^9}, {
  3.7341338264181876`*^9, 3.7341338581461344`*^9}, {3.7341339425470047`*^9, 
  3.7341339434902816`*^9}, {3.734167831842177*^9, 
  3.734167854579811*^9}},ExpressionUUID->"519e5431-5e2c-4c51-9399-\
ddd5cbc2665e"],

Cell[BoxData[
 RowBox[{
  RowBox[{"hmitser", "=", 
   RowBox[{
    RowBox[{"Simplify", "[", 
     RowBox[{
      RowBox[{"Series", "[", 
       RowBox[{
        RowBox[{
         RowBox[{"Integrate", "[", 
          RowBox[{
           RowBox[{"h", "[", "s", "]"}], ",", 
           RowBox[{"{", 
            RowBox[{"s", ",", "0", ",", "L"}], "}"}]}], "]"}], "/", "L"}], 
        ",", 
        RowBox[{"{", 
         RowBox[{"\[Theta]", ",", "0", ",", "2"}], "}"}]}], "]"}], ",", 
      RowBox[{"Assumptions", "\[Rule]", " ", 
       RowBox[{"\[Kappa]", ">", 
        RowBox[{"1", "/", "2"}]}]}]}], "]"}], "//", "Normal"}]}], 
  ";"}]], "Input",
 CellChangeTimes->{{3.7341343128357663`*^9, 3.73413435096144*^9}, {
   3.7341343867694244`*^9, 3.734134396001536*^9}, {3.7341344392335844`*^9, 
   3.734134486033489*^9}, 3.734134582641655*^9, {3.7341346348657255`*^9, 
   3.734134643873122*^9}},ExpressionUUID->"b5060b2b-e508-42d0-9a39-\
88d206d93529"],

Cell[CellGroupData[{

Cell["Berechne die Gleichgewichtsemittanz", "Subsubsection",
 CellChangeTimes->{{3.7341338921775885`*^9, 
  3.73413390227378*^9}},ExpressionUUID->"e9f440ef-689f-44fc-8373-\
3a0ef93f7aa5"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"\[Epsilon]0", "=", 
  RowBox[{
   RowBox[{
    RowBox[{"cq", "*", 
     RowBox[{"(", 
      FractionBox[
       RowBox[{"hmitser", "*", 
        SuperscriptBox["\[Gamma]rel", "2"]}], 
       RowBox[{
        RowBox[{"(", 
         RowBox[{"1", "-", "dd"}], ")"}], "*", "\[Rho]"}]], ")"}]}], "//.", 
    RowBox[{"L", "\[Rule]", " ", 
     RowBox[{"\[Rho]", "*", "\[Theta]"}]}]}], "//", 
   "FullSimplify"}]}]], "Input",
 CellChangeTimes->{{3.734133909625405*^9, 3.7341340066101904`*^9}, {
  3.7341343048814898`*^9, 3.734134307889332*^9}, {3.7341345847220073`*^9, 
  3.734134608802499*^9}, {3.7341347472346325`*^9, 3.734134760017809*^9}, {
  3.7341348465140676`*^9, 3.7341348923076887`*^9}, {3.7341680599371796`*^9, 
  3.7341680778749633`*^9}},ExpressionUUID->"c971a031-23f6-46a4-bb23-\
f5ffdc70e94e"],

Cell[BoxData[
 RowBox[{"-", 
  FractionBox[
   RowBox[{"cq", " ", 
    SuperscriptBox["\[Gamma]rel", "2"], " ", 
    SuperscriptBox["\[Theta]", "3"], " ", 
    RowBox[{"(", 
     RowBox[{"1", "-", 
      RowBox[{"180", " ", 
       SuperscriptBox["\[Kappa]", "2"]}], "+", 
      RowBox[{"960", " ", 
       SuperscriptBox["\[Kappa]", "4"]}]}], ")"}]}], 
   RowBox[{"5", " ", 
    SqrtBox[
     RowBox[{
      RowBox[{"-", "1"}], "+", 
      RowBox[{"4", " ", 
       SuperscriptBox["\[Kappa]", "2"]}]}]], " ", 
    RowBox[{"(", 
     RowBox[{
      RowBox[{"-", "12"}], "+", 
      RowBox[{
       SuperscriptBox["\[Theta]", "2"], " ", 
       RowBox[{"(", 
        RowBox[{
         RowBox[{"-", "1"}], "+", 
         RowBox[{"48", " ", 
          SuperscriptBox["\[Kappa]", "2"]}]}], ")"}]}]}], 
     ")"}]}]]}]], "Output",
 CellChangeTimes->{
  3.734134731835904*^9, 3.7341347695866613`*^9, 3.734134857190422*^9, 
   3.73413498153611*^9, 3.7341676994763813`*^9, 3.7341678728723135`*^9, {
   3.7341680706583643`*^9, 
   3.7341680864640307`*^9}},ExpressionUUID->"0b65e2d5-a13e-44af-bd4c-\
e763a888eb6c"]
}, Open  ]],

Cell[TextData[{
 "Der gesamte Term geht mit ",
 Cell[BoxData[
  FormBox[
   SuperscriptBox["\[Theta]", "3"], TraditionalForm]],
  FormatType->"TraditionalForm",ExpressionUUID->
  "449eb834-bbe7-4812-8b13-5f6c553e1eeb"],
 " in der N\[ADoubleDot]herung kleiner Winkel, da \[Theta] in der Gr\
\[ODoubleDot]\[SZ]enordnung von ",
 Cell[BoxData[
  FormBox[
   RowBox[{
    RowBox[{
     SuperscriptBox["10", 
      RowBox[{"-", "2"}]], " ", "ist"}], ",", " ", 
    RowBox[{"und", " ", 
     SuperscriptBox["\[Theta]", 
      RowBox[{"2", " "}]]}]}], TraditionalForm]],
  FormatType->"TraditionalForm",ExpressionUUID->
  "1cb0b376-4219-496c-bcef-687b192532c8"],
 "<< 12. Somit w\[UDoubleDot]rde ein \[Theta]->0 die Emittanz minimieren."
}], "Text",
 CellChangeTimes->{{3.7341350776692257`*^9, 3.7341351071683593`*^9}, {
  3.734168254950287*^9, 
  3.734168325121233*^9}},ExpressionUUID->"eddbeb58-1b15-440c-a5c2-\
5a9ece41260f"],

Cell[BoxData[
 RowBox[{"\[Theta]", "=", 
  FractionBox["L", "\[Rho]"]}]], "Input",
 CellChangeTimes->{{3.7341685137995996`*^9, 
  3.7341685245941525`*^9}},ExpressionUUID->"c5c579ae-ffbf-4912-a08e-\
584f64456800"],

Cell["\<\
F\[UDoubleDot]r Kreisbeschleuniger gibt es die Begrenzung des Umfanges (Geld, \
Platz).\
\>", "Text",
 CellChangeTimes->{{3.7341685706588025`*^9, 
  3.7341686723035607`*^9}},ExpressionUUID->"1757fc5d-06f7-495c-a561-\
abbe491d869c"],

Cell["Empfehlung ist das \[Theta] von LEP: \[Theta] = 0.011rad", "Text",
 CellChangeTimes->{{3.734169190975361*^9, 
  3.734169212608231*^9}},ExpressionUUID->"12d2ae73-31e9-40c2-8b5a-\
38b8312bfe0c"]
}, Open  ]]
}, Open  ]]
},
WindowSize->{1920, 1037},
WindowMargins->{{-8, Automatic}, {Automatic, -8}},
FrontEndVersion->"11.2 for Microsoft Windows (64-bit) (September 10, 2017)",
StyleDefinitions->"Default.nb"
]
(* End of Notebook Content *)

(* Internal cache information *)
(*CellTagsOutline
CellTagsIndex->{}
*)
(*CellTagsIndex
CellTagsIndex->{}
*)
(*NotebookFileOutline
Notebook[{
Cell[CellGroupData[{
Cell[580, 22, 345, 5, 96, "Title",ExpressionUUID->"93bbad7c-f06f-43d7-9405-864be9d6e68b"],
Cell[928, 29, 170, 3, 34, "Text",ExpressionUUID->"35f4395c-b0da-40de-80a0-494156ecd658"],
Cell[1101, 34, 164, 3, 34, "Text",ExpressionUUID->"e0bbb0f9-3343-4c93-95ee-1e8cbd3bdece"],
Cell[1268, 39, 1169, 30, 32, "Input",ExpressionUUID->"173db715-a89e-4256-b66b-1030d455bf48"],
Cell[2440, 71, 169, 3, 34, "Text",ExpressionUUID->"ec47d2bb-ecc9-4fcf-8c21-0d9c728f82cb"],
Cell[2612, 76, 1016, 29, 70, "Input",ExpressionUUID->"a12003cd-8411-47e8-8a39-158deede777e"],
Cell[3631, 107, 359, 10, 51, "Input",ExpressionUUID->"36082add-9393-4bf7-96be-d81b07adb634"],
Cell[3993, 119, 342, 9, 56, "Input",ExpressionUUID->"2dfd9f51-49e1-440d-8342-be55483c4457"],
Cell[4338, 130, 265, 6, 34, "Text",ExpressionUUID->"3b9024c9-7603-481e-bf50-4fd81c94d69a"],
Cell[4606, 138, 2747, 74, 52, "Input",ExpressionUUID->"29a9c1b5-f88d-4534-81a9-f4d880906a47"],
Cell[7356, 214, 916, 24, 28, "Input",ExpressionUUID->"ca8c43ac-f2d5-497a-adea-fe192d8dc11d"],
Cell[8275, 240, 384, 11, 28, "Input",ExpressionUUID->"e6842a35-6ba4-4a9a-bc32-8afa038d3a2a"],
Cell[8662, 253, 756, 19, 28, "Input",ExpressionUUID->"519e5431-5e2c-4c51-9399-ddd5cbc2665e"],
Cell[9421, 274, 948, 25, 28, "Input",ExpressionUUID->"b5060b2b-e508-42d0-9a39-88d206d93529"],
Cell[CellGroupData[{
Cell[10394, 303, 187, 3, 44, "Subsubsection",ExpressionUUID->"e9f440ef-689f-44fc-8373-3a0ef93f7aa5"],
Cell[CellGroupData[{
Cell[10606, 310, 823, 20, 57, "Input",ExpressionUUID->"c971a031-23f6-46a4-bb23-f5ffdc70e94e"],
Cell[11432, 332, 1104, 34, 73, "Output",ExpressionUUID->"0b65e2d5-a13e-44af-bd4c-e763a888eb6c"]
}, Open  ]],
Cell[12551, 369, 920, 25, 34, "Text",ExpressionUUID->"eddbeb58-1b15-440c-a5c2-5a9ece41260f"],
Cell[13474, 396, 212, 5, 53, "Input",ExpressionUUID->"c5c579ae-ffbf-4912-a08e-584f64456800"],
Cell[13689, 403, 241, 6, 34, "Text",ExpressionUUID->"1757fc5d-06f7-495c-a561-abbe491d869c"],
Cell[13933, 411, 198, 3, 34, "Text",ExpressionUUID->"12d2ae73-31e9-40c2-8b5a-38b8312bfe0c"]
}, Open  ]]
}, Open  ]]
}
]
*)

